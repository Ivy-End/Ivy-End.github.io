<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>SGU 101 - Domino | é€€æ€è½©</title><meta name=keywords content="å¤§å­¦ç”Ÿæ´»,ACM-ICPC,SGU"><meta name=description content="Description Dominoes â€“ game played with small, rectangular blocks of wood or other material, each identified by a number of dots, or pips, on its face. The blocks usually are called bones, dominoes, or pieces and sometimes men, stones, or even cards. The face of each piece is divided, by a line or ridge, into two squares, each of which is marked as would be a pair of dice&mldr; The principle in nearly all modern dominoes games is to match one end of a piece to another that is identically or reciprocally numbered. ENCYCLOPÃ†DIA BRITANNICA Given a set of domino pieces where each side is marked with two digits from 0 to 6. Your task is to arrange pieces in a line such way, that they touch through equal marked sides. It is possible to rotate pieces changing left and right side. Input The first line of the input contains a single integer $N$ ($1\leq N\leq 100$) representing the total number of pieces in the domino set. The following $N$ lines describe pieces. Each piece is represented on a separate line in a form of two digits from 0 to 6 separated by a space. Output Write &ldquo;No solution&rdquo;â€&#34; if it is impossible to arrange them described way. If it is possible, write any of way. Pieces must"><meta name=author content="Kai Wang"><link rel=canonical href=https://kwang.life/2015/02/sgu-101-domino/><meta name=google-site-verification content="G-FVKQ0YJ3T3"><link crossorigin=anonymous href=/assets/css/stylesheet.d0bbdd17990f87ff6e014a8bc41321a9caaada8485ed531c4ac154d7a4f810fa.css integrity="sha256-0LvdF5kPh/9uAUqLxBMhqcqq2oSF7VMcSsFU16T4EPo=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://kwang.life/images/others/site-favicon.png><link rel=icon type=image/png sizes=16x16 href=https://kwang.life/images/others/site-favicon.png><link rel=icon type=image/png sizes=32x32 href=https://kwang.life/images/others/site-favicon.png><link rel=apple-touch-icon href=https://kwang.life/images/others/site-favicon.png><link rel=mask-icon href=https://kwang.life/images/others/site-favicon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css integrity=sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js integrity=sha384-cpW21h6RZv/phavutF+AuVYrr+dA8xD9zs6FwLpaCct6O9ctzYFfFr4dgmgccOTx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:'$$',right:'$$',display:!0},{left:'$',right:'$',display:!1},{left:'\\(',right:'\\)',display:!1},{left:'\\[',right:'\\]',display:!0}],throwOnError:!1})})</script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=referrer content="no-referrer-when-downgrade"><script src=https://sdk.jinrishici.com/v2/browser/jinrishici.js></script>
<script type=text/javascript>jinrishici.load(function(e){const t="<p style='font-size: 22px;'>"+e.data.content+"</p>"+"<p style='font-size: 16px; text-align: right;'>"+e.data.origin.dynasty+"&nbsp;Â·&nbsp;"+e.data.origin.author+"ã€Š"+e.data.origin.title+"ã€‹</p>";document.getElementsByClassName('first-entry')[0].childNodes[1].innerHTML=t,console.log(e.data.content),console.log(e.data.origin.dynasty),console.log(e.data.origin.author),console.log(e.data.origin.title)})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-FVKQ0YJ3T3"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-FVKQ0YJ3T3',{anonymize_ip:!1})}</script><meta property="og:title" content="SGU 101 - Domino"><meta property="og:description" content="Description Dominoes â€“ game played with small, rectangular blocks of wood or other material, each identified by a number of dots, or pips, on its face. The blocks usually are called bones, dominoes, or pieces and sometimes men, stones, or even cards. The face of each piece is divided, by a line or ridge, into two squares, each of which is marked as would be a pair of dice&mldr; The principle in nearly all modern dominoes games is to match one end of a piece to another that is identically or reciprocally numbered. ENCYCLOPÃ†DIA BRITANNICA Given a set of domino pieces where each side is marked with two digits from 0 to 6. Your task is to arrange pieces in a line such way, that they touch through equal marked sides. It is possible to rotate pieces changing left and right side. Input The first line of the input contains a single integer $N$ ($1\leq N\leq 100$) representing the total number of pieces in the domino set. The following $N$ lines describe pieces. Each piece is represented on a separate line in a form of two digits from 0 to 6 separated by a space. Output Write &ldquo;No solution&rdquo;â€&#34; if it is impossible to arrange them described way. If it is possible, write any of way. Pieces must"><meta property="og:type" content="article"><meta property="og:url" content="https://kwang.life/2015/02/sgu-101-domino/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-02-22T13:10:00+08:00"><meta property="article:modified_time" content="2015-02-22T13:10:00+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="SGU 101 - Domino"><meta name=twitter:description content="Description Dominoes â€“ game played with small, rectangular blocks of wood or other material, each identified by a number of dots, or pips, on its face. The blocks usually are called bones, dominoes, or pieces and sometimes men, stones, or even cards. The face of each piece is divided, by a line or ridge, into two squares, each of which is marked as would be a pair of dice&mldr; The principle in nearly all modern dominoes games is to match one end of a piece to another that is identically or reciprocally numbered. ENCYCLOPÃ†DIA BRITANNICA Given a set of domino pieces where each side is marked with two digits from 0 to 6. Your task is to arrange pieces in a line such way, that they touch through equal marked sides. It is possible to rotate pieces changing left and right side. Input The first line of the input contains a single integer $N$ ($1\leq N\leq 100$) representing the total number of pieces in the domino set. The following $N$ lines describe pieces. Each piece is represented on a separate line in a form of two digits from 0 to 6 separated by a space. Output Write &ldquo;No solution&rdquo;â€&#34; if it is impossible to arrange them described way. If it is possible, write any of way. Pieces must"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://kwang.life/posts/"},{"@type":"ListItem","position":3,"name":"SGU 101 - Domino","item":"https://kwang.life/2015/02/sgu-101-domino/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"SGU 101 - Domino","name":"SGU 101 - Domino","description":"Description Dominoes â€“ game played with small, rectangular blocks of wood or other material, each identified by a number of dots, or pips, on its face. The blocks usually are called bones, dominoes, or pieces and sometimes men, stones, or even cards. The face of each piece is divided, by a line or ridge, into two squares, each of which is marked as would be a pair of dice\u0026hellip; The principle in nearly all modern dominoes games is to match one end of a piece to another that is identically or reciprocally numbered. ENCYCLOPÃ†DIA BRITANNICA Given a set of domino pieces where each side is marked with two digits from 0 to 6. Your task is to arrange pieces in a line such way, that they touch through equal marked sides. It is possible to rotate pieces changing left and right side. Input The first line of the input contains a single integer $N$ ($1\\leq N\\leq 100$) representing the total number of pieces in the domino set. The following $N$ lines describe pieces. Each piece is represented on a separate line in a form of two digits from 0 to 6 separated by a space. Output Write \u0026ldquo;No solution\u0026rdquo;â€\u0026quot; if it is impossible to arrange them described way. If it is possible, write any of way. Pieces must","keywords":["å¤§å­¦ç”Ÿæ´»","ACM-ICPC","SGU"],"articleBody":"Description Dominoes â€“ game played with small, rectangular blocks of wood or other material, each identified by a number of dots, or pips, on its face. The blocks usually are called bones, dominoes, or pieces and sometimes men, stones, or even cards.\nThe face of each piece is divided, by a line or ridge, into two squares, each of which is marked as would be a pair of diceâ€¦\nThe principle in nearly all modern dominoes games is to match one end of a piece to another that is identically or reciprocally numbered.\nENCYCLOPÃ†DIA BRITANNICA\nGiven a set of domino pieces where each side is marked with two digits from 0 to 6. Your task is to arrange pieces in a line such way, that they touch through equal marked sides. It is possible to rotate pieces changing left and right side.\nInput The first line of the input contains a single integer $N$ ($1\\leq N\\leq 100$) representing the total number of pieces in the domino set. The following $N$ lines describe pieces. Each piece is represented on a separate line in a form of two digits from 0 to 6 separated by a space.\nOutput Write â€œNo solutionâ€â€\" if it is impossible to arrange them described way. If it is possible, write any of way. Pieces must be written in left-to-right order. Every of $N$ lines must contains number of current domino piece and sign â€œ+â€ or â€œ-â€ (first means that you not rotate that piece, and second if you rotate it).\nSample Input 1 2 3 4 5 6 5 1 2 2 4 2 4 6 4 2 1 Sample Output 1 2 3 4 5 2 - 5 + 1 + 3 + 4 - Analysis è¿™é“é¢˜ç›®åšäº†å¥½ä¹…å¥½ä¹…ï¼Œç»ˆäº AC äº†ã€‚\næˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™é“é¢˜ç›®å®Œå…¨ä¸çŸ¥é“æ€ä¹ˆåšï¼Œç¬¬äºŒæ¬¡è§‰å¾—å¯ä»¥ dfsã€‚åæ¥çœ‹äº†é¢˜è§£ï¼Œå‘ç°æ˜¯æ¬§æ‹‰é€šè·¯ã€‚\næˆ‘ä»¬å°† 0~6 è¿™ 7 ä¸ªæ•°å­—çœ‹æˆç‚¹ï¼Œæ¯ä¸ªå¤šç±³è¯ºéª¨ç‰Œçœ‹æˆä¸€æ¡æ— å‘è¾¹ï¼Œæ„å»ºä¸€å¼ å›¾ã€‚\nè¿™è¾¹ç”¨åˆ°ä¸€ä¸ª trickï¼Œæˆ‘ä»¬è®¾ç½® pVisited æ•°ç»„çš„æ—¶å€™ï¼Œä¸ä¸€å®šè¦åˆ¤æ–­ç‚¹æ˜¯å¦è®¿é—®è¿‡ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨æ¥åˆ¤æ–­è¾¹æ˜¯å¦è®¿é—®è¿‡ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¾¹é›†æ•°ç»„æ¥ä¿å­˜è¿™å¼ å›¾ã€‚\næ¬§æ‹‰é€šè·¯ä¹Ÿå°±æ˜¯ä¸€ç¬”ç”»é—®é¢˜ï¼Œå®ƒåŒºåˆ«äºæ¬§æ‹‰å›è·¯ï¼ˆæ¬§æ‹‰å›è·¯è¦æ±‚å›åˆ°èµ·å§‹ç‚¹ï¼‰ã€‚\næ€è·¯å¾ˆç®€å•ï¼Œé¦–å…ˆç¡®å®šèµ·ç‚¹ï¼š\nåº¦ä¸ºå¥‡æ•°çš„ç‚¹çš„æ€»æ•°ä¸º 0ï¼Œä»»é€‰ä¸€ä¸ªç‚¹ä¸ºèµ·ç‚¹ï¼› åº¦ä¸ºå¥‡æ•°çš„ç‚¹çš„æ€»æ•°ä¸º 2ï¼Œä»»é€‰ä¸¤ä¸ªç‚¹ä¸­çš„æŸä¸ªç‚¹ä¸ºèµ·ç‚¹ï¼› å…¶ä»–æƒ…å†µä¸‹æ— è§£ã€‚ æ¥ä¸‹æ¥å°±æ˜¯å†™æ¬§æ‹‰é€šè·¯äº†ï¼Œä¹‹å‰åœ¨ä¸€ä¸ª NOIP çš„å‚è€ƒèµ„æ–™ä¸Šçœ‹åˆ°ä¸€ä¸ª dfs çš„ç‰ˆæœ¬ï¼ŒæŒ‰ç€å®ƒå†™äº†ä¸€éï¼Œä¸€ç›´ WAï¼Œåæ¥å‘ç°ï¼Œä»–çš„æ–¹æ³•å¥½åƒæœ‰é—®é¢˜ã€‚\né™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦åˆ¤æ–­è‡ªç¯ï¼Œä¹Ÿå°±æ˜¯å¦‚æœè¿™å¼ å›¾ä¸è¿é€šï¼Œé‚£ä¹ˆæ˜¾ç„¶æ˜¯æ— è§£çš„ã€‚\nè¿˜æœ‰ï¼Œé€‰æ‹©èµ·ç‚¹çš„æ—¶å€™ï¼Œä»»æ„è¿”å›ä¸€ä¸ªç‚¹ï¼Œéœ€è¦æ³¨æ„è¿™ä¸ªç‚¹å¿…é¡»æ˜¯å‡ºç°è¿‡çš„ç‚¹ï¼Œå¦åˆ™å°±ä¼š WAã€‚\nç»è¿‡è¿™ä¹ˆå¤šçš„æ€è€ƒï¼Œé‡æ–°å†™äº†ä¸çŸ¥é“å¤šå°‘éä»£ç ï¼Œç»ˆäº AC äº†ã€‚\næœ€åè¿˜åœ¨â€œNo solutionâ€ä¸­â€œsâ€çš„å¤§å°å†™é—®é¢˜ä¸Š PE äº†ä¸€æ¬¡ã€‚\nSolution 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 #include #include using namespace std; const int MAX = 128; const int SIZE = 8; struct Node { int s, e; }; struct Path { int x; char y; }; int N; bool bFlag; bool pVisited[MAX]; int pDegree[SIZE], pMap[SIZE][SIZE]; Node pNode[MAX]; Path pPath[MAX]; int Check(); void dfs(int nStart, int nFlag, int nStep); int main() { int x, y; while(cin \u003e\u003e N) { bFlag = false; memset(pMap, 0, sizeof(pMap)); memset(pVisited, false, sizeof(pVisited)); for(int i = 1; i \u003c= N; i++) { cin \u003e\u003e x \u003e\u003e y; pMap[x][y]++; pMap[y][x]++; pNode[i].s = x; pNode[i].e = y; } int nStart = Check(); if(nStart == -1) { cout \u003c\u003c \"No solution\" \u003c\u003c endl; } else { for(int i = 1; i \u003c= N; i++) { if(pNode[i].s == nStart) { dfs(i, 1, 1); break; } else if(pNode[i].e == nStart) { dfs(i, 2, 1); break; } } } if(!bFlag) { cout \u003c\u003c \"No solution\" \u003c\u003c endl; } } } int Check() { memset(pDegree, 0, sizeof(pDegree)); int nCnt = 0, nPos = pNode[1].s; for(int i = 0; i \u003c SIZE; i++) { for(int j = 0; j \u003c SIZE; j++) { pDegree[i] += pMap[i][j]; } } for(int i = 0; i \u003c SIZE; i++) { if(pDegree[i] % 2) { nCnt++; nPos = i; } } if(nCnt == 0 || nCnt == 2) { return nPos; } else { return -1; } } void dfs(int nStart, int nFlag, int nStep) { if(bFlag) { return; } pVisited[nStart] = true; pPath[nStep].x = nStart; pPath[nStep].y = (nFlag == 1) ? '+' : '-'; if(nStep == N) { for(int i = 1; i \u003c= N; i++) { cout \u003c\u003c pPath[i].x \u003c\u003c \" \" \u003c\u003c pPath[i].y \u003c\u003c endl; } bFlag = true; } int nNext = (nFlag == 1) ? pNode[nStart].e : pNode[nStart].s; for(int i = 1; i \u003c= N; i++) { if(!pVisited[i]) { if(pNode[i].s == nNext) { dfs(i, 1, nStep + 1); } else if(pNode[i].e == nNext) { dfs(i, 2, nStep + 1); } pVisited[i] = false; } } } ç»ˆäº AC äº†è¿™é“é¢˜ç›®ï¼Œå†™äº†å¥½ä¹…å¥½ä¹…äº†ã€‚\n","wordCount":"1234","inLanguage":"zh","datePublished":"2015-02-22T13:10:00+08:00","dateModified":"2015-02-22T13:10:00+08:00","author":{"@type":"Person","name":"Kai Wang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://kwang.life/2015/02/sgu-101-domino/"},"publisher":{"@type":"Organization","name":"é€€æ€è½©","logo":{"@type":"ImageObject","url":"https://kwang.life/images/others/site-favicon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://kwang.life accesskey=h title="é€€æ€è½© (Alt + H)"><img src=https://kwang.life/images/others/site-favicon.png alt aria-label=logo height=35>é€€æ€è½©</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://kwang.life/ title=ğŸ é¦–é¡µ><span>ğŸ é¦–é¡µ</span></a></li><li><a href=https://kwang.life/archives/ title=ğŸ“”å½’æ¡£><span>ğŸ“”å½’æ¡£</span></a></li><li><a href=https://kwang.life/tags/ title=ğŸ·ï¸æ ‡ç­¾><span>ğŸ·ï¸æ ‡ç­¾</span></a></li><li><a href=https://kwang.life/search/ title="ğŸ”æœç´¢ (Alt + /)" accesskey=/><span>ğŸ”æœç´¢</span></a></li><li><a href=https://kwang.life/categories/ title=ğŸ—‚ï¸åˆ†ç±»><span>ğŸ—‚ï¸åˆ†ç±»</span></a></li><li><a href=https://kwang.life/friends/ title=ğŸŒé‚»å±…><span>ğŸŒé‚»å±…</span></a></li><li><a href=https://kwang.life/about/ title=ğŸ“œå…³äº><span>ğŸ“œå…³äº</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>SGU 101 - Domino</h1><div class=post-meta><span title='2015-02-22 13:10:00 +0800 +0800'>2015å¹´2æœˆ22æ—¥</span>&nbsp;Â·&nbsp;3 åˆ†é’Ÿ&nbsp;Â·&nbsp;1234 å­—&nbsp;Â·&nbsp;Kai Wang&nbsp;Â·&nbsp;<span id=busuanzi_container_site_pv>æœ¬æ–‡é˜…è¯»é‡&nbsp;<span id=busuanzi_value_page_pv></span>&nbsp;æ¬¡</span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>ç›®å½•</span></summary><div class=inner><ul><li><a href=#description aria-label=Description>Description</a></li><li><a href=#input aria-label=Input>Input</a></li><li><a href=#output aria-label=Output>Output</a></li><li><a href=#sample-input aria-label="Sample Input">Sample Input</a></li><li><a href=#sample-output aria-label="Sample Output">Sample Output</a></li><li><a href=#analysis aria-label=Analysis>Analysis</a></li><li><a href=#solution aria-label=Solution>Solution</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener('DOMContentLoaded',function(){checkTocPosition(),elements=document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]'),activeElement=elements[0];const e=encodeURI(activeElement.getAttribute('id')).toLowerCase();document.querySelector(`.inner ul li a[href="#${e}"]`).classList.add('active')},!1),window.addEventListener('resize',function(){checkTocPosition()},!1),window.addEventListener('scroll',()=>{elements&&(activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute('id')).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add('active'):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove('active')}))},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue('--gap'),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=description>Description<a hidden class=anchor aria-hidden=true href=#description>#</a></h2><blockquote><p>Dominoes â€“ game played with small, rectangular blocks of wood or other material, each identified by a number of dots, or pips, on its face. The blocks usually are called bones, dominoes, or pieces and sometimes men, stones, or even cards.</p><p>The face of each piece is divided, by a line or ridge, into two squares, each of which is marked as would be a pair of dice&mldr;</p><p>The principle in nearly all modern dominoes games is to match one end of a piece to another that is identically or reciprocally numbered.</p><p>ENCYCLOPÃ†DIA BRITANNICA</p></blockquote><p>Given a set of domino pieces where each side is marked with two digits from 0 to 6. Your task is to arrange pieces in a line such way, that they touch through equal marked sides. It is possible to rotate pieces changing left and right side.</p><h2 id=input>Input<a hidden class=anchor aria-hidden=true href=#input>#</a></h2><p>The first line of the input contains a single integer $N$ ($1\leq N\leq 100$) representing the total number of pieces in the domino set. The following $N$ lines describe pieces. Each piece is represented on a separate line in a form of two digits from 0 to 6 separated by a space.</p><h2 id=output>Output<a hidden class=anchor aria-hidden=true href=#output>#</a></h2><p>Write &ldquo;No solution&rdquo;â€" if it is impossible to arrange them described way. If it is possible, write any of way. Pieces must be written in left-to-right order. Every of $N$ lines must contains number of current domino piece and sign &ldquo;+&rdquo; or &ldquo;-&rdquo; (first means that you not rotate that piece, and second if you rotate it).</p><h2 id=sample-input>Sample Input<a hidden class=anchor aria-hidden=true href=#sample-input>#</a></h2><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>5
</span></span><span style=display:flex><span>1 2
</span></span><span style=display:flex><span>2 4
</span></span><span style=display:flex><span>2 4
</span></span><span style=display:flex><span>6 4
</span></span><span style=display:flex><span>2 1
</span></span></code></pre></td></tr></table></div></div><h2 id=sample-output>Sample Output<a hidden class=anchor aria-hidden=true href=#sample-output>#</a></h2><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>2 -
</span></span><span style=display:flex><span>5 +
</span></span><span style=display:flex><span>1 +
</span></span><span style=display:flex><span>3 +
</span></span><span style=display:flex><span>4 -
</span></span></code></pre></td></tr></table></div></div><h2 id=analysis>Analysis<a hidden class=anchor aria-hidden=true href=#analysis>#</a></h2><p>è¿™é“é¢˜ç›®åšäº†å¥½ä¹…å¥½ä¹…ï¼Œç»ˆäº AC äº†ã€‚</p><p>æˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™é“é¢˜ç›®å®Œå…¨ä¸çŸ¥é“æ€ä¹ˆåšï¼Œç¬¬äºŒæ¬¡è§‰å¾—å¯ä»¥ dfsã€‚åæ¥çœ‹äº†é¢˜è§£ï¼Œå‘ç°æ˜¯æ¬§æ‹‰é€šè·¯ã€‚</p><p>æˆ‘ä»¬å°† 0~6 è¿™ 7 ä¸ªæ•°å­—çœ‹æˆç‚¹ï¼Œæ¯ä¸ªå¤šç±³è¯ºéª¨ç‰Œçœ‹æˆä¸€æ¡æ— å‘è¾¹ï¼Œæ„å»ºä¸€å¼ å›¾ã€‚</p><p>è¿™è¾¹ç”¨åˆ°ä¸€ä¸ª trickï¼Œæˆ‘ä»¬è®¾ç½® <code>pVisited</code> æ•°ç»„çš„æ—¶å€™ï¼Œä¸ä¸€å®šè¦åˆ¤æ–­ç‚¹æ˜¯å¦è®¿é—®è¿‡ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨æ¥åˆ¤æ–­è¾¹æ˜¯å¦è®¿é—®è¿‡ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¾¹é›†æ•°ç»„æ¥ä¿å­˜è¿™å¼ å›¾ã€‚</p><p>æ¬§æ‹‰é€šè·¯ä¹Ÿå°±æ˜¯ä¸€ç¬”ç”»é—®é¢˜ï¼Œå®ƒåŒºåˆ«äºæ¬§æ‹‰å›è·¯ï¼ˆæ¬§æ‹‰å›è·¯è¦æ±‚å›åˆ°èµ·å§‹ç‚¹ï¼‰ã€‚</p><p>æ€è·¯å¾ˆç®€å•ï¼Œé¦–å…ˆç¡®å®šèµ·ç‚¹ï¼š</p><ul><li>åº¦ä¸ºå¥‡æ•°çš„ç‚¹çš„æ€»æ•°ä¸º 0ï¼Œä»»é€‰ä¸€ä¸ªç‚¹ä¸ºèµ·ç‚¹ï¼›</li><li>åº¦ä¸ºå¥‡æ•°çš„ç‚¹çš„æ€»æ•°ä¸º 2ï¼Œä»»é€‰ä¸¤ä¸ªç‚¹ä¸­çš„æŸä¸ªç‚¹ä¸ºèµ·ç‚¹ï¼›</li><li>å…¶ä»–æƒ…å†µä¸‹æ— è§£ã€‚</li></ul><p>æ¥ä¸‹æ¥å°±æ˜¯å†™æ¬§æ‹‰é€šè·¯äº†ï¼Œä¹‹å‰åœ¨ä¸€ä¸ª NOIP çš„å‚è€ƒèµ„æ–™ä¸Šçœ‹åˆ°ä¸€ä¸ª dfs çš„ç‰ˆæœ¬ï¼ŒæŒ‰ç€å®ƒå†™äº†ä¸€éï¼Œä¸€ç›´ WAï¼Œåæ¥å‘ç°ï¼Œä»–çš„æ–¹æ³•å¥½åƒæœ‰é—®é¢˜ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦åˆ¤æ–­è‡ªç¯ï¼Œä¹Ÿå°±æ˜¯å¦‚æœè¿™å¼ å›¾ä¸è¿é€šï¼Œé‚£ä¹ˆæ˜¾ç„¶æ˜¯æ— è§£çš„ã€‚</p><p>è¿˜æœ‰ï¼Œé€‰æ‹©èµ·ç‚¹çš„æ—¶å€™ï¼Œä»»æ„è¿”å›ä¸€ä¸ªç‚¹ï¼Œéœ€è¦æ³¨æ„è¿™ä¸ªç‚¹å¿…é¡»æ˜¯å‡ºç°è¿‡çš„ç‚¹ï¼Œå¦åˆ™å°±ä¼š WAã€‚</p><p>ç»è¿‡è¿™ä¹ˆå¤šçš„æ€è€ƒï¼Œé‡æ–°å†™äº†ä¸çŸ¥é“å¤šå°‘éä»£ç ï¼Œç»ˆäº AC äº†ã€‚</p><p>æœ€åè¿˜åœ¨â€œNo solutionâ€ä¸­â€œsâ€çš„å¤§å°å†™é—®é¢˜ä¸Š PE äº†ä¸€æ¬¡ã€‚</p><h2 id=solution>Solution<a hidden class=anchor aria-hidden=true href=#solution>#</a></h2><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">55
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">56
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">57
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">58
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">59
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">60
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">61
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">62
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">63
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">64
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">65
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">66
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">67
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">68
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">69
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">70
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">71
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">72
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">73
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">74
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">75
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">76
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">77
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">78
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">79
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">80
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">81
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">82
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">83
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">84
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">85
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">86
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">87
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">88
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">89
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">90
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">91
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">92
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">93
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">94
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">95
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">96
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">97
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">98
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">99
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;memory.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> <span style=color:#66d9ef>namespace</span> std;
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> MAX <span style=color:#f92672>=</span> <span style=color:#ae81ff>128</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> SIZE <span style=color:#f92672>=</span> <span style=color:#ae81ff>8</span>;
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Node</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> s, e;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Path</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> x;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>char</span> y;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> N;
</span></span><span style=display:flex><span><span style=color:#66d9ef>bool</span> bFlag;
</span></span><span style=display:flex><span><span style=color:#66d9ef>bool</span> pVisited[MAX];
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> pDegree[SIZE], pMap[SIZE][SIZE];
</span></span><span style=display:flex><span>Node pNode[MAX];
</span></span><span style=display:flex><span>Path pPath[MAX];
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>Check</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>dfs</span>(<span style=color:#66d9ef>int</span> nStart, <span style=color:#66d9ef>int</span> nFlag, <span style=color:#66d9ef>int</span> nStep);
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> x, y;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span>(cin <span style=color:#f92672>&gt;&gt;</span> N)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        bFlag <span style=color:#f92672>=</span> false;
</span></span><span style=display:flex><span>        memset(pMap, <span style=color:#ae81ff>0</span>, <span style=color:#66d9ef>sizeof</span>(pMap));
</span></span><span style=display:flex><span>        memset(pVisited, false, <span style=color:#66d9ef>sizeof</span>(pVisited));
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; i <span style=color:#f92672>&lt;=</span> N; i<span style=color:#f92672>++</span>)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            cin <span style=color:#f92672>&gt;&gt;</span> x <span style=color:#f92672>&gt;&gt;</span> y;
</span></span><span style=display:flex><span>            pMap[x][y]<span style=color:#f92672>++</span>; pMap[y][x]<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>            pNode[i].s <span style=color:#f92672>=</span> x; pNode[i].e <span style=color:#f92672>=</span> y;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> nStart <span style=color:#f92672>=</span> Check();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(nStart <span style=color:#f92672>==</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) {  cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;No solution&#34;</span> <span style=color:#f92672>&lt;&lt;</span> endl; }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; i <span style=color:#f92672>&lt;=</span> N; i<span style=color:#f92672>++</span>)
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span>(pNode[i].s <span style=color:#f92672>==</span> nStart)
</span></span><span style=display:flex><span>                { dfs(i, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>); <span style=color:#66d9ef>break</span>; }
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(pNode[i].e <span style=color:#f92672>==</span> nStart)
</span></span><span style=display:flex><span>                { dfs(i, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>1</span>); <span style=color:#66d9ef>break</span>; }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#f92672>!</span>bFlag) { cout <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34;No solution&#34;</span> <span style=color:#f92672>&lt;&lt;</span> endl; }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>Check</span>()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    memset(pDegree, <span style=color:#ae81ff>0</span>, <span style=color:#66d9ef>sizeof</span>(pDegree));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> nCnt <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>, nPos <span style=color:#f92672>=</span> pNode[<span style=color:#ae81ff>1</span>].s;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> SIZE; i<span style=color:#f92672>++</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> j <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; j <span style=color:#f92672>&lt;</span> SIZE; j<span style=color:#f92672>++</span>)
</span></span><span style=display:flex><span>        { pDegree[i] <span style=color:#f92672>+=</span> pMap[i][j]; }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> SIZE; i<span style=color:#f92672>++</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(pDegree[i] <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span>) { nCnt<span style=color:#f92672>++</span>; nPos <span style=color:#f92672>=</span> i; }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(nCnt <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>||</span> nCnt <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span>) { <span style=color:#66d9ef>return</span> nPos; }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> { <span style=color:#66d9ef>return</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>; }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>dfs</span>(<span style=color:#66d9ef>int</span> nStart, <span style=color:#66d9ef>int</span> nFlag, <span style=color:#66d9ef>int</span> nStep)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(bFlag) { <span style=color:#66d9ef>return</span>; }
</span></span><span style=display:flex><span>    pVisited[nStart] <span style=color:#f92672>=</span> true;
</span></span><span style=display:flex><span>    pPath[nStep].x <span style=color:#f92672>=</span> nStart;
</span></span><span style=display:flex><span>    pPath[nStep].y <span style=color:#f92672>=</span> (nFlag <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;+&#39;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;-&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(nStep <span style=color:#f92672>==</span> N)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; i <span style=color:#f92672>&lt;=</span> N; i<span style=color:#f92672>++</span>)
</span></span><span style=display:flex><span>        { cout <span style=color:#f92672>&lt;&lt;</span> pPath[i].x <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#34; &#34;</span> <span style=color:#f92672>&lt;&lt;</span> pPath[i].y <span style=color:#f92672>&lt;&lt;</span> endl; }
</span></span><span style=display:flex><span>        bFlag <span style=color:#f92672>=</span> true;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> nNext <span style=color:#f92672>=</span> (nFlag <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>?</span> pNode[nStart].e : pNode[nStart].s;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; i <span style=color:#f92672>&lt;=</span> N; i<span style=color:#f92672>++</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#f92672>!</span>pVisited[i])
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span>(pNode[i].s <span style=color:#f92672>==</span> nNext) { dfs(i, <span style=color:#ae81ff>1</span>, nStep <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>); }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(pNode[i].e <span style=color:#f92672>==</span> nNext) { dfs(i, <span style=color:#ae81ff>2</span>, nStep <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>); }
</span></span><span style=display:flex><span>            pVisited[i] <span style=color:#f92672>=</span> false;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>ç»ˆäº AC äº†è¿™é“é¢˜ç›®ï¼Œå†™äº†å¥½ä¹…å¥½ä¹…äº†ã€‚</p></div><footer class=post-footer><div class=copyright-box style="margin:0 auto;margin-bottom:15px;text-align:center;border:1px dashed #ccc;padding:10px"><p>æœ¬ä½œå“é‡‡ç”¨<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel="noopener noreferrer" style="box-shadow:0 1px">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚</p><div style=margin-top:5px><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel="noopener noreferrer"><img src=https://kwang.life/images/copyright/CC_BY-NC-SA.svg alt=CC-BY-NC-SA style=width:auto;height:42px;display:inline-block></a>
<a href=https://notbyai.fyi target=_blank rel="noopener noreferrer"><img src=https://kwang.life/images/copyright/Written-By-Human-Not-By-AI-Badge-white.svg alt=çœŸäººæ’°å†™ï¼ŒéAIç”Ÿæˆ style=width:auto;height:42px;display:inline-block></a></div></div><ul class=post-tags><li><a href=https://kwang.life/tags/%E5%A4%A7%E5%AD%A6%E7%94%9F%E6%B4%BB/>å¤§å­¦ç”Ÿæ´»</a></li><li><a href=https://kwang.life/tags/acm-icpc/>ACM-ICPC</a></li><li><a href=https://kwang.life/tags/sgu/>SGU</a></li></ul><nav class=paginav><a class=prev href=https://kwang.life/2015/02/sgu-104-little-shop-of-flowers/><span class=title>Â« ä¸Šä¸€é¡µ</span><br><span>SGU 104 - Little shop of flowers</span></a>
<a class=next href=https://kwang.life/2015/02/sgu-347-join-the-strings/><span class=title>ä¸‹ä¸€é¡µ Â»</span><br><span>SGU 347 - Join the Strings</span></a></nav></footer><div id=tcomment></div><script src=https://cdn.staticfile.org/twikoo/1.6.17/twikoo.all.min.js></script>
<script>twikoo.init({envId:'https://kwang-twikoo.zeabur.app/',el:'#tcomment'})</script></article></main><footer class=footer><span>&copy; 2023 <a href=https://kwang.life>é€€æ€è½©</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><br><div class=busuanzi-footer><span id=busuanzi_container_site_pv>æ€»è®¿é—®é‡&nbsp<span id=busuanzi_value_site_pv></span>&nbspæ¬¡
       </span>
&nbsp;Â·&nbsp;
<span id=busuanzi_container_site_uv>æ€»è®¿å®¢æ•°&nbsp<span id=busuanzi_value_site_uv></span>&nbspä½
       </span></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script><script>document.querySelectorAll('pre > code').forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement('button');e.classList.add('copy-code'),e.innerHTML='å¤åˆ¶';function s(){e.innerHTML='å·²å¤åˆ¶ï¼',setTimeout(()=>{e.innerHTML='å¤åˆ¶'},2e3)}e.addEventListener('click',o=>{if('clipboard'in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand('copy'),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>