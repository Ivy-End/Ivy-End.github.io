<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>SGU 126 - Boxes | 退思轩</title><meta name=keywords content="ACM-ICPC,SGU"><meta name=description content="Description There are two boxes. There are $A$ balls in the first box, and $B$ balls in the second box ($0 < A + B < 2147483648$). It is possible to move balls from one box to another. From one box into another one should move as many balls as the other box already contains. You have to determine, whether it is possible to move all balls into one box. Input The first line contains two integers $A$ and $B$, delimited by space. Output First line should contain the number $N$ - the number of moves which are required to move all balls into one box, or -1 if it is impossible. Sample Input 1 2 6 Sample Output 1 2 Analysis 模拟法 设定一个规定步数（经过反复测试，在给定的数据范围内32步即可满足要求），如果在规定步数内完成任务，则输出步数，否则输出-1。 数学法 首先我们有一个结论 $(x, y)$ 与 $\left(\frac{x}{\mathrm{gcd}(x, y)}, \frac{y}{\mathrm{gcd}(x, y)}\right)$ 具有相同的答案。 证明：我们可以运用整体的思想，将 $\mathrm{gcd}(x, y)$ 个球看成一个球。例如 5 5，我们可以看"><meta name=author content="Kai Wang"><link rel=canonical href=https://kwang.life/2015/03/sgu-126-boxes/><meta name=google-site-verification content="G-FVKQ0YJ3T3"><link crossorigin=anonymous href=/assets/css/stylesheet.ca147d49e8814c08e5d4b03afbfca66bd9776fb2666d476035e4b2854d94aaf7.css integrity="sha256-yhR9SeiBTAjl1LA6+/yma9l3b7JmbUdgNeSyhU2Uqvc=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://kwang.life/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=16x16 href=https://kwang.life/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://kwang.life/favicons/apple-touch-icon.png><link rel=apple-touch-icon href=https://kwang.life/favicons/apple-touch-icon.png><link rel=mask-icon href=https://kwang.life/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css integrity=sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js integrity=sha384-cpW21h6RZv/phavutF+AuVYrr+dA8xD9zs6FwLpaCct6O9ctzYFfFr4dgmgccOTx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:'$$',right:'$$',display:!0},{left:'$',right:'$',display:!1},{left:'\\(',right:'\\)',display:!1},{left:'\\[',right:'\\]',display:!0}],throwOnError:!1})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-FVKQ0YJ3T3"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-FVKQ0YJ3T3',{anonymize_ip:!1})}</script><meta property="og:title" content="SGU 126 - Boxes"><meta property="og:description" content="Description There are two boxes. There are $A$ balls in the first box, and $B$ balls in the second box ($0 < A + B < 2147483648$). It is possible to move balls from one box to another. From one box into another one should move as many balls as the other box already contains. You have to determine, whether it is possible to move all balls into one box. Input The first line contains two integers $A$ and $B$, delimited by space. Output First line should contain the number $N$ - the number of moves which are required to move all balls into one box, or -1 if it is impossible. Sample Input 1 2 6 Sample Output 1 2 Analysis 模拟法 设定一个规定步数（经过反复测试，在给定的数据范围内32步即可满足要求），如果在规定步数内完成任务，则输出步数，否则输出-1。 数学法 首先我们有一个结论 $(x, y)$ 与 $\left(\frac{x}{\mathrm{gcd}(x, y)}, \frac{y}{\mathrm{gcd}(x, y)}\right)$ 具有相同的答案。 证明：我们可以运用整体的思想，将 $\mathrm{gcd}(x, y)$ 个球看成一个球。例如 5 5，我们可以看"><meta property="og:type" content="article"><meta property="og:url" content="https://kwang.life/2015/03/sgu-126-boxes/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-03-07T09:28:00+08:00"><meta property="article:modified_time" content="2015-03-07T09:28:00+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="SGU 126 - Boxes"><meta name=twitter:description content="Description There are two boxes. There are $A$ balls in the first box, and $B$ balls in the second box ($0 < A + B < 2147483648$). It is possible to move balls from one box to another. From one box into another one should move as many balls as the other box already contains. You have to determine, whether it is possible to move all balls into one box. Input The first line contains two integers $A$ and $B$, delimited by space. Output First line should contain the number $N$ - the number of moves which are required to move all balls into one box, or -1 if it is impossible. Sample Input 1 2 6 Sample Output 1 2 Analysis 模拟法 设定一个规定步数（经过反复测试，在给定的数据范围内32步即可满足要求），如果在规定步数内完成任务，则输出步数，否则输出-1。 数学法 首先我们有一个结论 $(x, y)$ 与 $\left(\frac{x}{\mathrm{gcd}(x, y)}, \frac{y}{\mathrm{gcd}(x, y)}\right)$ 具有相同的答案。 证明：我们可以运用整体的思想，将 $\mathrm{gcd}(x, y)$ 个球看成一个球。例如 5 5，我们可以看"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://kwang.life/posts/"},{"@type":"ListItem","position":3,"name":"SGU 126 - Boxes","item":"https://kwang.life/2015/03/sgu-126-boxes/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"SGU 126 - Boxes","name":"SGU 126 - Boxes","description":"Description There are two boxes. There are $A$ balls in the first box, and $B$ balls in the second box ($0 \u0026lt; A + B \u0026lt; 2147483648$). It is possible to move balls from one box to another. From one box into another one should move as many balls as the other box already contains. You have to determine, whether it is possible to move all balls into one box. Input The first line contains two integers $A$ and $B$, delimited by space. Output First line should contain the number $N$ - the number of moves which are required to move all balls into one box, or -1 if it is impossible. Sample Input 1 2 6 Sample Output 1 2 Analysis 模拟法 设定一个规定步数（经过反复测试，在给定的数据范围内32步即可满足要求），如果在规定步数内完成任务，则输出步数，否则输出-1。 数学法 首先我们有一个结论 $(x, y)$ 与 $\\left(\\frac{x}{\\mathrm{gcd}(x, y)}, \\frac{y}{\\mathrm{gcd}(x, y)}\\right)$ 具有相同的答案。 证明：我们可以运用整体的思想，将 $\\mathrm{gcd}(x, y)$ 个球看成一个球。例如 5 5，我们可以看","keywords":["ACM-ICPC","SGU"],"articleBody":"Description There are two boxes. There are $A$ balls in the first box, and $B$ balls in the second box ($0 \u003c A + B \u003c 2147483648$). It is possible to move balls from one box to another. From one box into another one should move as many balls as the other box already contains. You have to determine, whether it is possible to move all balls into one box.\nInput The first line contains two integers $A$ and $B$, delimited by space.\nOutput First line should contain the number $N$ - the number of moves which are required to move all balls into one box, or -1 if it is impossible.\nSample Input 1 2 6 Sample Output 1 2 Analysis 模拟法 设定一个规定步数（经过反复测试，在给定的数据范围内32步即可满足要求），如果在规定步数内完成任务，则输出步数，否则输出-1。\n数学法 首先我们有一个结论 $(x, y)$ 与 $\\left(\\frac{x}{\\mathrm{gcd}(x, y)}, \\frac{y}{\\mathrm{gcd}(x, y)}\\right)$ 具有相同的答案。\n证明：我们可以运用整体的思想，将 $\\mathrm{gcd}(x, y)$ 个球看成一个球。例如 5 5，我们可以看成 1 1，其中后面的 1 代表了 5 个小球。\n有了上面的结论，我们只需要处理 $(X, Y)$ 即可，其中 $$ X = \\frac{x}{\\mathrm{gcd}(x, y)},\\quad Y = \\frac{y}{\\mathrm{gcd}(x, y)}$$ 很明显，当 $X + Y$ 为奇数时无解，因为要完成任务，必定有状态 $(A, A)$ 出现，其中 $A = \\frac{X + Y}{2}$。\n接下来，我们来推到一般解的情况，令 $N = X + Y$，并设 $K$步完成任务：\n步骤数目 解空间状态 $K$ $(N, 0)$ $K - 1$ $(N / 2, N / 2)$ $K - 2$ $(N / 4, 3N / 4)$ $K - 3$ $(N / 8, 7N / 8), (5N / 8, 3N / 8)$ $K - 4$ $(N / 16, 15N / 16), (9N / 16, 7N / 16), (5N / 16, 11N / 16), (13N / 16, 3N / 16)$ $\\cdots$ $\\cdots$ 我们可以看到，当 $N$ 为 2 的幂次时有解，其中 2 的指数则为所需要的步骤数（这也就验证了模拟时只需要 32 步即可），这样我们就可以很轻松的解决这个问题了。\nSolution 模拟法 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 #include using namespace std; const int MAX = 32; int main() { int x, y; while(cin \u003e\u003e x \u003e\u003e y) { int nCnt = 0; while(x != 0 \u0026\u0026 y != 0 \u0026\u0026 nCnt \u003c= MAX) { if(x \u003c= y) { y -= x; x += x; } else { x -= y; y += y; } nCnt++; } if(x != 0 \u0026\u0026 y != 0) { cout \u003c\u003c -1 \u003c\u003c endl; } else { cout \u003c\u003c nCnt \u003c\u003c endl; } } return 0; } 数学法 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 #include using namespace std; int gcd(int x, int y); int main() { int x, y; while(cin \u003e\u003e x \u003e\u003e y) { int nCnt = 0; int nTmp = gcd(x, y); x /= nTmp; y /= nTmp; int nSum = x + y; while(nSum \u003e 1) { if(nSum \u0026 1) { nCnt = -1; break; } else { nCnt++; nSum \u003e\u003e= 1; } } if(x == 0 || y == 0) { nCnt = 0; } cout \u003c\u003c nCnt \u003c\u003c endl; } } int gcd(int x, int y) { if(y == 0) { return x; } else { return gcd(y, x % y); } } 这道数学题想了好久，终于AC了，主要在于一个逆推的过程以及看出 $(x, y)$ 与 $\\left(\\frac{x}{\\mathrm{gcd}(x, y)}, \\frac{y}{\\mathrm{gcd}(x, y)}\\right)$ 同解。\n","wordCount":"817","inLanguage":"zh","datePublished":"2015-03-07T09:28:00+08:00","dateModified":"2015-03-07T09:28:00+08:00","author":{"@type":"Person","name":"Kai Wang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://kwang.life/2015/03/sgu-126-boxes/"},"publisher":{"@type":"Organization","name":"退思轩","logo":{"@type":"ImageObject","url":"https://kwang.life/favicons/apple-touch-icon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://kwang.life accesskey=h title="退思轩 (Alt + H)"><img src=https://kwang.life/favicons/apple-touch-icon.png alt aria-label=logo height=35>退思轩</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://kwang.life/ title=🏠首页><span>🏠首页</span></a></li><li><a href=https://kwang.life/archives/ title=📔归档><span>📔归档</span></a></li><li><a href=https://kwang.life/tags/ title=🏷️标签><span>🏷️标签</span></a></li><li><a href=https://kwang.life/search/ title="🔍搜索 (Alt + /)" accesskey=/><span>🔍搜索</span></a></li><li><a href=https://kwang.life/categories/ title=🗂️分类><span>🗂️分类</span></a></li><li><a href=https://kwang.life/friends/ title=🌏邻居><span>🌏邻居</span></a></li><li><a href=https://kwang.life/about/ title=📜关于><span>📜关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>SGU 126 - Boxes</h1><div class=post-meta><span title='2015-03-07 09:28:00 +0800 +0800'>2015年3月7日</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;817 字&nbsp;·&nbsp;Kai Wang</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#description aria-label=Description>Description</a></li><li><a href=#input aria-label=Input>Input</a></li><li><a href=#output aria-label=Output>Output</a></li><li><a href=#sample-input aria-label="Sample Input">Sample Input</a></li><li><a href=#sample-output aria-label="Sample Output">Sample Output</a></li><li><a href=#analysis aria-label=Analysis>Analysis</a><ul><li><a href=#%e6%a8%a1%e6%8b%9f%e6%b3%95 aria-label=模拟法>模拟法</a></li><li><a href=#%e6%95%b0%e5%ad%a6%e6%b3%95 aria-label=数学法>数学法</a></li></ul></li><li><a href=#solution aria-label=Solution>Solution</a><ul><li><a href=#%e6%a8%a1%e6%8b%9f%e6%b3%95-1 aria-label=模拟法>模拟法</a></li><li><a href=#%e6%95%b0%e5%ad%a6%e6%b3%95-1 aria-label=数学法>数学法</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener('DOMContentLoaded',function(){checkTocPosition(),elements=document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]'),activeElement=elements[0];const e=encodeURI(activeElement.getAttribute('id')).toLowerCase();document.querySelector(`.inner ul li a[href="#${e}"]`).classList.add('active')},!1),window.addEventListener('resize',function(){checkTocPosition()},!1),window.addEventListener('scroll',()=>{elements&&(activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute('id')).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add('active'):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove('active')}))},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue('--gap'),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=description>Description<a hidden class=anchor aria-hidden=true href=#description>#</a></h2><p>There are two boxes. There are $A$ balls in the first box, and $B$ balls in the second box ($0 &lt; A + B &lt; 2147483648$). It is possible to move balls from one box to another. From one box into another one should move as many balls as the other box already contains. You have to determine, whether it is possible to move all balls into one box.</p><h2 id=input>Input<a hidden class=anchor aria-hidden=true href=#input>#</a></h2><p>The first line contains two integers $A$ and $B$, delimited by space.</p><h2 id=output>Output<a hidden class=anchor aria-hidden=true href=#output>#</a></h2><p>First line should contain the number $N$ - the number of moves which are required to move all balls into one box, or -1 if it is impossible.</p><h2 id=sample-input>Sample Input<a hidden class=anchor aria-hidden=true href=#sample-input>#</a></h2><div class=highlight><div style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>2 6
</span></span></code></pre></td></tr></table></div></div><h2 id=sample-output>Sample Output<a hidden class=anchor aria-hidden=true href=#sample-output>#</a></h2><div class=highlight><div style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>2
</span></span></code></pre></td></tr></table></div></div><h2 id=analysis>Analysis<a hidden class=anchor aria-hidden=true href=#analysis>#</a></h2><h3 id=模拟法>模拟法<a hidden class=anchor aria-hidden=true href=#模拟法>#</a></h3><p>设定一个规定步数（经过反复测试，在给定的数据范围内32步即可满足要求），如果在规定步数内完成任务，则输出步数，否则输出-1。</p><h3 id=数学法>数学法<a hidden class=anchor aria-hidden=true href=#数学法>#</a></h3><p>首先我们有一个结论 $(x, y)$ 与 $\left(\frac{x}{\mathrm{gcd}(x, y)}, \frac{y}{\mathrm{gcd}(x, y)}\right)$ 具有相同的答案。</p><p>证明：我们可以运用整体的思想，将 $\mathrm{gcd}(x, y)$ 个球看成一个球。例如 5 5，我们可以看成 1 1，其中后面的 1 代表了 5 个小球。</p><p>有了上面的结论，我们只需要处理 $(X, Y)$ 即可，其中 $$ X = \frac{x}{\mathrm{gcd}(x, y)},\quad Y = \frac{y}{\mathrm{gcd}(x, y)}$$ 很明显，当 $X + Y$ 为奇数时无解，因为要完成任务，必定有状态 $(A, A)$ 出现，其中 $A = \frac{X + Y}{2}$。</p><p>接下来，我们来推到一般解的情况，令 $N = X + Y$，并设 $K$步完成任务：</p><table><thead><tr><th style=text-align:center>步骤数目</th><th style=text-align:center>解空间状态</th></tr></thead><tbody><tr><td style=text-align:center>$K$</td><td style=text-align:center>$(N, 0)$</td></tr><tr><td style=text-align:center>$K - 1$</td><td style=text-align:center>$(N / 2, N / 2)$</td></tr><tr><td style=text-align:center>$K - 2$</td><td style=text-align:center>$(N / 4, 3N / 4)$</td></tr><tr><td style=text-align:center>$K - 3$</td><td style=text-align:center>$(N / 8, 7N / 8), (5N / 8, 3N / 8)$</td></tr><tr><td style=text-align:center>$K - 4$</td><td style=text-align:center>$(N / 16, 15N / 16), (9N / 16, 7N / 16), (5N / 16, 11N / 16), (13N / 16, 3N / 16)$</td></tr><tr><td style=text-align:center>$\cdots$</td><td style=text-align:center>$\cdots$</td></tr></tbody></table><p>我们可以看到，当 $N$ 为 2 的幂次时有解，其中 2 的指数则为所需要的步骤数（这也就验证了模拟时只需要 32 步即可），这样我们就可以很轻松的解决这个问题了。</p><h2 id=solution>Solution<a hidden class=anchor aria-hidden=true href=#solution>#</a></h2><h3 id=模拟法-1>模拟法<a hidden class=anchor aria-hidden=true href=#模拟法-1>#</a></h3><div class=highlight><div style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#93a1a1;font-style:italic>#include</span> <span style=color:#93a1a1;font-style:italic>&lt;iostream&gt;</span><span style=color:#93a1a1;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#93a1a1;font-style:italic></span> 
</span></span><span style=display:flex><span><span style=color:#859900>using</span> <span style=color:#859900>namespace</span> <span style=color:#268bd2>std</span>;
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#859900>const</span> <span style=color:#859900;font-weight:700>int</span> <span style=color:#268bd2>MAX</span> = <span style=color:#2aa198;font-weight:700>32</span>;
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#859900;font-weight:700>int</span> <span style=color:#268bd2>main</span>()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#859900;font-weight:700>int</span> <span style=color:#268bd2>x</span>, <span style=color:#268bd2>y</span>;
</span></span><span style=display:flex><span>    <span style=color:#859900>while</span>(<span style=color:#268bd2>cin</span> &gt;&gt; <span style=color:#268bd2>x</span> &gt;&gt; <span style=color:#268bd2>y</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#859900;font-weight:700>int</span> <span style=color:#268bd2>nCnt</span> = <span style=color:#2aa198;font-weight:700>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#859900>while</span>(<span style=color:#268bd2>x</span> != <span style=color:#2aa198;font-weight:700>0</span> &amp;&amp; <span style=color:#268bd2>y</span> != <span style=color:#2aa198;font-weight:700>0</span> &amp;&amp; <span style=color:#268bd2>nCnt</span> &lt;= <span style=color:#268bd2>MAX</span>)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#859900>if</span>(<span style=color:#268bd2>x</span> &lt;= <span style=color:#268bd2>y</span>) { <span style=color:#268bd2>y</span> -= <span style=color:#268bd2>x</span>; <span style=color:#268bd2>x</span> += <span style=color:#268bd2>x</span>; }
</span></span><span style=display:flex><span>            <span style=color:#859900>else</span> { <span style=color:#268bd2>x</span> -= <span style=color:#268bd2>y</span>; <span style=color:#268bd2>y</span> += <span style=color:#268bd2>y</span>; }
</span></span><span style=display:flex><span>            <span style=color:#268bd2>nCnt</span>++;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#859900>if</span>(<span style=color:#268bd2>x</span> != <span style=color:#2aa198;font-weight:700>0</span> &amp;&amp; <span style=color:#268bd2>y</span> != <span style=color:#2aa198;font-weight:700>0</span>) { <span style=color:#268bd2>cout</span> &lt;&lt; -<span style=color:#2aa198;font-weight:700>1</span> &lt;&lt; <span style=color:#268bd2>endl</span>; }
</span></span><span style=display:flex><span>        <span style=color:#859900>else</span> { <span style=color:#268bd2>cout</span> &lt;&lt; <span style=color:#268bd2>nCnt</span> &lt;&lt; <span style=color:#268bd2>endl</span>; }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#859900>return</span> <span style=color:#2aa198;font-weight:700>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=数学法-1>数学法<a hidden class=anchor aria-hidden=true href=#数学法-1>#</a></h3><div class=highlight><div style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#93a1a1;font-style:italic>#include</span> <span style=color:#93a1a1;font-style:italic>&lt;iostream&gt;</span><span style=color:#93a1a1;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#93a1a1;font-style:italic></span> 
</span></span><span style=display:flex><span><span style=color:#859900>using</span> <span style=color:#859900>namespace</span> <span style=color:#268bd2>std</span>;
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#859900;font-weight:700>int</span> <span style=color:#268bd2>gcd</span>(<span style=color:#859900;font-weight:700>int</span> <span style=color:#268bd2>x</span>, <span style=color:#859900;font-weight:700>int</span> <span style=color:#268bd2>y</span>);
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#859900;font-weight:700>int</span> <span style=color:#268bd2>main</span>()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#859900;font-weight:700>int</span> <span style=color:#268bd2>x</span>, <span style=color:#268bd2>y</span>;
</span></span><span style=display:flex><span>    <span style=color:#859900>while</span>(<span style=color:#268bd2>cin</span> &gt;&gt; <span style=color:#268bd2>x</span> &gt;&gt; <span style=color:#268bd2>y</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#859900;font-weight:700>int</span> <span style=color:#268bd2>nCnt</span> = <span style=color:#2aa198;font-weight:700>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#859900;font-weight:700>int</span> <span style=color:#268bd2>nTmp</span> = <span style=color:#268bd2>gcd</span>(<span style=color:#268bd2>x</span>, <span style=color:#268bd2>y</span>);
</span></span><span style=display:flex><span>        <span style=color:#268bd2>x</span> /= <span style=color:#268bd2>nTmp</span>; <span style=color:#268bd2>y</span> /= <span style=color:#268bd2>nTmp</span>;
</span></span><span style=display:flex><span>        <span style=color:#859900;font-weight:700>int</span> <span style=color:#268bd2>nSum</span> = <span style=color:#268bd2>x</span> + <span style=color:#268bd2>y</span>;
</span></span><span style=display:flex><span>        <span style=color:#859900>while</span>(<span style=color:#268bd2>nSum</span> &gt; <span style=color:#2aa198;font-weight:700>1</span>)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#859900>if</span>(<span style=color:#268bd2>nSum</span> &amp; <span style=color:#2aa198;font-weight:700>1</span>) { <span style=color:#268bd2>nCnt</span> = -<span style=color:#2aa198;font-weight:700>1</span>; <span style=color:#859900>break</span>; }
</span></span><span style=display:flex><span>            <span style=color:#859900>else</span> { <span style=color:#268bd2>nCnt</span>++; <span style=color:#268bd2>nSum</span> &gt;&gt;= <span style=color:#2aa198;font-weight:700>1</span>; }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#859900>if</span>(<span style=color:#268bd2>x</span> == <span style=color:#2aa198;font-weight:700>0</span> || <span style=color:#268bd2>y</span> == <span style=color:#2aa198;font-weight:700>0</span>) { <span style=color:#268bd2>nCnt</span> = <span style=color:#2aa198;font-weight:700>0</span>; }
</span></span><span style=display:flex><span>        <span style=color:#268bd2>cout</span> &lt;&lt; <span style=color:#268bd2>nCnt</span> &lt;&lt; <span style=color:#268bd2>endl</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#859900;font-weight:700>int</span> <span style=color:#268bd2>gcd</span>(<span style=color:#859900;font-weight:700>int</span> <span style=color:#268bd2>x</span>, <span style=color:#859900;font-weight:700>int</span> <span style=color:#268bd2>y</span>)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#859900>if</span>(<span style=color:#268bd2>y</span> == <span style=color:#2aa198;font-weight:700>0</span>) { <span style=color:#859900>return</span> <span style=color:#268bd2>x</span>; }
</span></span><span style=display:flex><span>    <span style=color:#859900>else</span> { <span style=color:#859900>return</span> <span style=color:#268bd2>gcd</span>(<span style=color:#268bd2>y</span>, <span style=color:#268bd2>x</span> % <span style=color:#268bd2>y</span>); }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>这道数学题想了好久，终于AC了，主要在于一个逆推的过程以及看出 $(x, y)$ 与 $\left(\frac{x}{\mathrm{gcd}(x, y)}, \frac{y}{\mathrm{gcd}(x, y)}\right)$ 同解。</p></div><footer class=post-footer><div class=copyright-box style="margin:0 auto;margin-bottom:5px;text-align:center;border:1px dashed #ccc;padding:5px"><p>本作品采用<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel="noopener noreferrer" style="box-shadow:0 1px">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。</p><div style=margin-top:5px><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel="noopener noreferrer"><img src=https://kwang.life/images/copyright/CC_BY-NC-SA.svg alt=CC-BY-NC-SA style=width:auto;height:42px;display:inline-block></a>
<a href=https://notbyai.fyi target=_blank rel="noopener noreferrer"><img src=https://kwang.life/images/copyright/Written-By-Human-Not-By-AI-Badge-white.svg alt=真人撰写，非AI生成 style=width:auto;height:42px;display:inline-block></a></div></div><ul class=post-tags><li><a href=https://kwang.life/tags/acm-icpc/>ACM-ICPC</a></li><li><a href=https://kwang.life/tags/sgu/>SGU</a></li></ul><nav class=paginav><a class=prev href=https://kwang.life/2015/03/sgu-276-andrews-troubles/><span class=title>« 上一页</span><br><span>SGU 276 - Andrew's Troubles</span></a>
<a class=next href=https://kwang.life/2015/02/sgu-118-digital-root/><span class=title>下一页 »</span><br><span>SGU 118 - Digital Root</span></a></nav></footer><div id=tcomment></div><script src=https://cdn.staticfile.org/twikoo/1.6.17/twikoo.all.min.js></script>
<script>twikoo.init({envId:'twikoo-5gwvo0qda499b637',el:'#tcomment'})</script></article></main><footer class=footer><span>&copy; 2023 <a href=https://kwang.life>退思轩</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><a href="https://ipw.cn/ssl/?site=kwang.life" title=本站支持SSL安全访问 target=_blank><img style=display:inline-block;vertical-align:middle alt=本站支持SSL安全访问 src=https://static.ipw.cn/icon/ssl-s1.svg></a>
<a href="https://ipw.cn/ipv6webcheck/?site=kwang.life" title=本站支持IPv6访问 target=_blank><img style=display:inline-block;vertical-align:middle alt=本站支持IPv6访问 src=https://static.ipw.cn/icon/ipv6-certified-s1.svg></a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script><script>document.querySelectorAll('pre > code').forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement('button');e.classList.add('copy-code'),e.innerHTML='复制';function s(){e.innerHTML='已复制！',setTimeout(()=>{e.innerHTML='复制'},2e3)}e.addEventListener('click',o=>{if('clipboard'in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand('copy'),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>