<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>集成电路版图设计实验（以运算放大器和带隙基准源为例） | 退思轩</title><meta name=keywords content="集成电路版图,运算放大器,带隙基准源"><meta name=description content="（本文根据 2017 年本科三年级的课程试验报告整理而来。当年采用的是 ICFB 软件，时至今日已广泛采用 IC617，但我认为这份材料依旧不乏可取之处，分享如下"><meta name=author content="Kai Wang"><link rel=canonical href=https://kwang.life/2022/12/%E9%9B%86%E6%88%90%E7%94%B5%E8%B7%AF%E7%89%88%E5%9B%BE%E8%AE%BE%E8%AE%A1%E5%AE%9E%E9%AA%8C%E4%BB%A5%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E5%92%8C%E5%B8%A6%E9%9A%99%E5%9F%BA%E5%87%86%E6%BA%90%E4%B8%BA%E4%BE%8B/><meta name=google-site-verification content="G-FVKQ0YJ3T3"><link crossorigin=anonymous href=/assets/css/stylesheet.d9ccb10bfd1448c90fc290c1954a0bc00e07bbde1d31cdb48bb590dc1e6d810f.css integrity="sha256-2cyxC/0USMkPwpDBlUoLwA4Hu94dMc20i7WQ3B5tgQ8=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://kwang.life/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=16x16 href=https://kwang.life/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://kwang.life/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://kwang.life/favicons/apple-touch-icon.png><link rel=mask-icon href=https://kwang.life/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css integrity=sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js integrity=sha384-cpW21h6RZv/phavutF+AuVYrr+dA8xD9zs6FwLpaCct6O9ctzYFfFr4dgmgccOTx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:'$$',right:'$$',display:!0},{left:'$',right:'$',display:!1},{left:'\\(',right:'\\)',display:!1},{left:'\\[',right:'\\]',display:!0}],throwOnError:!1})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-FVKQ0YJ3T3"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-FVKQ0YJ3T3',{anonymize_ip:!1})}</script><meta property="og:title" content="集成电路版图设计实验（以运算放大器和带隙基准源为例）"><meta property="og:description" content="（本文根据 2017 年本科三年级的课程试验报告整理而来。当年采用的是 ICFB 软件，时至今日已广泛采用 IC617，但我认为这份材料依旧不乏可取之处，分享如下"><meta property="og:type" content="article"><meta property="og:url" content="https://kwang.life/2022/12/%E9%9B%86%E6%88%90%E7%94%B5%E8%B7%AF%E7%89%88%E5%9B%BE%E8%AE%BE%E8%AE%A1%E5%AE%9E%E9%AA%8C%E4%BB%A5%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E5%92%8C%E5%B8%A6%E9%9A%99%E5%9F%BA%E5%87%86%E6%BA%90%E4%B8%BA%E4%BE%8B/"><meta property="og:image" content="https://kwang.life/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-21T11:09:00+08:00"><meta property="article:modified_time" content="2022-12-21T11:09:00+08:00"><meta property="og:site_name" content="退思轩"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kwang.life/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="集成电路版图设计实验（以运算放大器和带隙基准源为例）"><meta name=twitter:description content="（本文根据 2017 年本科三年级的课程试验报告整理而来。当年采用的是 ICFB 软件，时至今日已广泛采用 IC617，但我认为这份材料依旧不乏可取之处，分享如下"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://kwang.life/posts/"},{"@type":"ListItem","position":3,"name":"集成电路版图设计实验（以运算放大器和带隙基准源为例）","item":"https://kwang.life/2022/12/%E9%9B%86%E6%88%90%E7%94%B5%E8%B7%AF%E7%89%88%E5%9B%BE%E8%AE%BE%E8%AE%A1%E5%AE%9E%E9%AA%8C%E4%BB%A5%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E5%92%8C%E5%B8%A6%E9%9A%99%E5%9F%BA%E5%87%86%E6%BA%90%E4%B8%BA%E4%BE%8B/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"集成电路版图设计实验（以运算放大器和带隙基准源为例）","name":"集成电路版图设计实验（以运算放大器和带隙基准源为例）","description":"（本文根据 2017 年本科三年级的课程试验报告整理而来。当年采用的是 ICFB 软件，时至今日已广泛采用 IC617，但我认为这份材料依旧不乏可取之处，分享如下","keywords":["集成电路版图","运算放大器","带隙基准源"],"articleBody":"（本文根据 2017 年本科三年级的课程试验报告整理而来。当年采用的是 ICFB 软件，时至今日已广泛采用 IC617，但我认为这份材料依旧不乏可取之处，分享如下。）\n一、运算放大器 1.1 实验目的 熟悉 CentOS 下的 Cadence 集成开发环境； 掌握元件库的调用方法，并由此进行原理图绘制及版图设计； 掌握版图设计中对称性和紧凑性的要求，并能熟练运用； 掌握版图设计中的中心对称技术和屏蔽技术，并能熟练运用； 掌握 DRC（Design Rule Check，设计规则检验）和 LVS（Layout Versus Schematic，版图与电路一致性检验）操作，并能运用其对设计的版图进行检查； 掌握版图设计中相关错误的解决方法。 1.2 实验仪器 正确安装了 VMware Workstation 的计算机一台； CentOS 下的 Cadence 集成开发环境一套。 1.3 实验内容 首先根据给出的电路图及相关参数（如图 1 所示）在 Cadence 中绘制出原理图，并在此基础上设计与之相对应的版图。在设计版图的过程中，需要注意对称性以及紧凑型；此外，还需要运用屏蔽技术和叉指技术。对设计完的版图进行 DRC 以及 LVS 检查，通过上述检查后，方可确认版图设计完成且准确无误。\n图 1：运算放大器电路图\n1.4 操作说明 在 CentOS 下的 Cadence 集成开发环境中，快捷键的使用显得尤为重要。正确合理地使用快捷键能够极大的加快原理图及版图的绘制过程。现将常用的快捷键列出如下：\n快捷键 描述 F 将当前视图设置为满屏显示 Shift+Z 将当前视图缩小两倍 Ctrl+Z 将当前视图放大两倍 ↑ ↓ ← → 对当前视图进行上下左右移动 I 调用器件实例 P 原理图中添加 Pin，版图中添加 Path W 原理图中添加 Wire L 版图中添加 Label O 版图中添加通孔 R 版图中添加矩形 S 版图中拉伸图形 K 版图中添加标尺 Shift+K 清除版图中所有标尺 Q 查看当前选中器件的属性 M 移动操作 U 撤销操作 Ctrl+D 取消当前器件的选择 F3 调出位置排版工具栏，可进行器件上下、左右的反转 ESC 取消操作 DELETE 删除操作 1.5 电路绘制 我们需要首先创建一个 Library，其中 Name 为 Library 的名字，我们在此填入 lecture，如图 2 所示，我们接下来的所有操作都将在这个 Library 中进行。\n图 2：Library 创建对话框\n在绘制电路图之前，我们还需要创建一个 Cell View，其中 Cell Name 为 Cell View 的名字，我们在此填入 opamp，在 Tool 下拉框中选择 Composer-Schematic，可以看到 View Name 中的内容为 schematic 表示我们此次创建的文件为电路图，如图 3 所示。\n图 3：Cell View 创建对话框\n单击 OK 后，程序会弹出一个操作窗口用于绘制电路图。在这个界面下，我们可以使用上面提到过的快捷键操作进行原理图的绘制。此处我们使用快捷键 I 来添加一个元件实例，如图 4 所示：\n图 4：Instance 创建对话框\n单击“Browse”菜单，在弹出的“Library Browser”对话框中，勾选 Show Categories，表示将器件库中的器件按照类别分类后再进行显示。我们在从左到右四个栏目中依次选择 GSMC_R018S6D0 -\u003e mos -\u003e PCH（对应于 PMOS）或 NCH（对应于 NMOS）-\u003e symbol，如图 5 所示：\n图 5：Library Browser 对话框\n再进行了上述选择后，图 4 的对话框会发生相应的变化，如图 6 所示。其中的 Multiplier、Total Width、Height 等均可根据电路图的不同参数进行设置。\n图 6：Instance 设置对话框\n但有时我们不希望直接对 Total Width 进行设置，而希望通过修改 Finger Width 和 Fingers 对 MOS 的尺寸进行修改，此时我们只需要取消 Apply Threshold 的复选框即可实现这一目的。其次，我们还可以在 Names 编辑框中给 MOS 进行命名，以区分不同的 MOS，这在器件较多时能够更方便的对电路图中的器件进行定位，以方便后续的版图设计以及查错。剩余的选项，例如 GATE Connection、Switch S/D、Bodytie Type 等我们将在版图设计的过程中一一介绍它们的功能。\n此处我们只需要根据设计要求给定的元器件参数对其进行修改后，在窗口中单击，即可创建一个元件实例。\n除了晶体管之外，我们在这个电路图中还需要用到电容，需要在 Library Browser 对话框中选择 GSMC_R018S6D0 -\u003e cap -\u003e CMIM -\u003e symbol 进行调用。需要注意的是这里的电容具有三个端子，其中两端为电容的正负极，另一端需要接地。\n重复上一步的操作，按照图 1 的电路及参数进行设置和绘制，即可得到相应的电路图，如图 7 所示，可以观察到每个器件边上都有其对应的名称和参数，极大的方便了我们的工作。同时可以观察到电路图的左边是二级运算放大器电路，右边是共模负反馈结构。\n图 7：运算放大器电路图绘制结果\n1.6 版图设计 1.6.1 晶体管 如同绘制电路图一样，我们采用快捷键 I 来创建晶体管的版图，与之前不同的是，我们将选择 layout 而非 symbol，创建后的版图如图 8 所示（以 PCH 为例）：\n图 8：晶体管默认版图\n接下来，我们需要像电路图中一样，对它的参数进行设置，选中晶体管，使用快捷键 Q 打开属性对话框，如图 9 所示：\n图 9：晶体管属性对话框\n可以看到，这里面同样有 Total Width、Length、Finger Width 和 Fingers 选项，这些设置和电路图中的设置是一样的。此处我们需要介绍的是参数为GATE Connection、Switch S/D、Bodytie Type。\n其中 GATE Connection 用于设置晶体管中各个 finger 之间的栅极的了解情况，一般来说我们选择 Top 或 Bottom 即可，也就是说在晶体管的一侧将栅极都连接在一起。\n接下来的 Switch S/D 用于交换源漏端子，由于 MOS 器件是一种对称器件，因此在连接之前交换源漏不影响晶体管的特性，但有时却可以方便我们版图的布线。\n最后是 Bodytie Type 设置，这是用来设置衬底的，它一共有三种选项，分别为 None、Integrated 和 Detached。第一个选项表示无衬底，此时衬底需要我们自行绘制，故不推荐此选项；第二个选项表示衬底和 MOS 的源或漏连在一起，适用于 PMOS 源接高电平或 NMOS 漏接地这两种情况；第三个选项表示衬底与 MOS 器件是分离的，适用于源漏不在高低电平上的情况。\n至此，我们对于晶体管的调用就完成了。\n1.6.2 电容 我们同样采用快捷键 I 来创建一个电容的版图实例，如图 10 所示：\n图 10：电容默认版图\n可以发现，电容的版图相较于晶体管的版图显得尤为大。同样，我们选中电容，运用快捷键 Q 打开电容属性对话框，如图 11 所示：\n图 11：电容属性对话框\n由于在电路图绘制中没有解释过电容的相关参数，故在此处详细介绍一下电容的相关设置。首先看到有这些参数：Total Capacitance、Unit Capacitance、Unit Width、Unit Height、Capacitor Rows、Capacitor Columns。在这些参数中 Total Capacitance 可以通过 Unit Capacitance、Capacitor Rows、Capacitor Columns 计算得到。而 Unit Capacitance 又可以通过 Unit Width、Unit Height 计算得到。（可以观察 Area Capacitance 对话框显示为 $1~\\mathrm{fF/um^2}$）\n有了上述的基础后，我们看到 Calculate Parameter 这个选项，由于这些参数并不是独立的，因此可以通过其中的某些参数计算得出其它的参数，这个 Calculate Parameter 就是用于选择需要计算的参数。此处我们已知了总电容的大小，因此将其选择为 width \u0026 length 表示宽度和高度均需要通过计算得出，这样我们只需要在 Total Capacitance 中填入我们电容的大小就可以完成电容量的设置了。\n继续往下看，可以发现还有 PSUB Left Bar、PSUB Right Bar、PSUB Top Bar、PSUB Bottom Bar 这四个选项，这对应于电路图中的接地端子，一般我们只需要选择一侧即可。\n此外，需要注意的是，电容的正极材料为 M6，负极材料为 M5，接地材料为 M1。\n1.6.3 中心对称技术 电路图中存在着多个 MOS 差分对，我们选择其中的一对进行分析，如图 12 所示：\n图 12：差分对实例\n在实际流片过程中，芯片在晶圆上制作完成后需要切割成一块块的裸片，在切割过程中方向是不确定的，而且很可能出现切割失误。在最坏的情况下，其中一个晶体管被切割掉，从而导致整个电路无法政策工作。因此需要采用中心对称技术，如图 13 所示（其中 A、B 为差分对管）。这样不论如何切割，将同时切除差分对管相同的部分，从而对差分对管的功能影响并不是很大。\n图 13：中心对称示意图\n在绘制版图的过程中，将对应 MOS 管的长度不变，宽度变为一半，按照图 13 的布局要求，将差分对管进行布局，并将其对应的栅、源、漏三端相连，即可完成差分对管的版图设计，如图 14 所示：\n图 14：差分对管版图设计\n1.6.4 屏蔽技术 在集成电路中存在着很多的干扰，这就要求我们适当地运用一些屏蔽技术来改善这一问题。一般情况下，可以将差分对管放置在屏蔽环内，这样可以有效减少周围器件对差分对管的干扰。对于 PMOS 对管，我们可以将其放置在 NGR 组成的屏蔽环内；对于 NMOS 对管，我们可以将其放置在 PGR 组成的屏蔽环内。对于某些要求更为严格的电路，可能需要采用双屏蔽环结构来屏蔽干扰。在本实验中，我们仅采用单环屏蔽结构。\n使用快捷键 O 打开 Contact 创建对话框，如图 15 所示：\n图 15：Contact 创建对话框\n在本例中 Contact Type 选择 NGR，并且根据晶体管的尺寸适当的调整 Rows、Columns 参数，使得 NGR 能够包围整个差分对管，设计完成后的结果如图 16 所示：\n图 16：添加屏蔽环后的差分对管版图\n1.6.5 底层设计 若差分对管的电流系数不对称，很有可能造成整个电路的“失调”，为了减小失调电压以及失调电流，在版图设计上需要遵循对称设计的原则。最常见的对称设计是“几何轴对称设计”。也就是说版图中的各个元器件布局需要尽可能的放在轴对称的位置上。\n1.6.6 综合设计 综合上述各个模块，运用叉指技术、屏蔽技术，同时注意版图布局的对称性和紧凑型，最后我们设计出的版图如图 17 所示：\n图 17：运算放大器版图\n1.7 心得体会 1.7.1 常见错误 在 Cadence 环境下所有的单位都是默认的，不需要额外输入单位，否则容易造成错误；如果需要输入单位，必须使用小写英文字母。 在进行版图设计时，需要注意设计规则，例如 M1 之间的最小间距为 0.23μm，M2 之间的最小间距为 0.28μm，NW 之间的最小间距为 1.4μm 等，记住这些设计规则，能够极大地简化版图设计的过程，防止全部布局完成后 DRC 错误导致重新布局，从而影响整体设计。 在进行电容的连线时，需要注意 M6 是电容正极，M5 是电容负极，此外电容有源区需要接地。 1.7.2 电容网表加载 在版图设计完成后，运行 LVS 时，提示“Error: No matching “.SUBCKT” statement for “cmim” at line xxx”，如图 18 所示：\n图 18：LVS 错误信息\n出现这个问题的原因时由于缺少电容的网表描述文件，具体的解决方法如下：切换到 Inputs 页面，选择 Netlist 板块，在 Files 选项中单击 … 按钮，打开浏览窗口，如图 19 所示：\n图 19：文件浏览对话框\n在对话框中切换到路径“/home/iclayout/projects/IC-gsmc180/pdk/GSMC180nm_v1p6/Net list”，选择其中的 subcircuit.cdl 文件，单击 Add 后系统会弹出如图 20 所示的对话框，选择 Add at end，即可完成电容的网表描述文件的添加。再添加完网表描述文件后即可正确进行 LVS 功能。\n图 20：确认对话框\n1.7.3 LVS 错误分析 在运行 LVS 后，可能会出现问题，常见的问题有以下几种，我们将一一对其进行分析。首先遇到的是寄生提取过程中的错误，其错误信息如图 21 所示：\n图 21：LVS 错误一\n出现这个问题的原因是由于引脚 Label 没有正确的打到对应的金属上，可能是位置没有放置正确，也可能是材料使用错误。\n第二个问题也是较为常见的，它的错误信息如图 22 所示：\n图 22：LVS 错误二\n造成这个错误的原因主要是存在尚未正确连接到对应端口上的器件，此时我们可以单击上面的 16，系统会自动弹出对应的版图和电路图，如图 23 所示：\n图 23：LVS 电路图版图对应图\n该窗口会将存在问题的线路进行高亮显示，从而方便我们定位问题。再找到这些问题以后，将连接补上，即可通过 LVS 的验证，最终结果如图 24 所示：\n图 24：LVS 最终结果\n二、带隙基准源 2.1 实验目的 熟悉 CentOS 下的 Cadence 集成开发环境； 掌握元件库的调用方法，并由此进行原理图绘制及版图设计； 掌握版图设计中对称性和紧凑性的要求，并能熟练运用； 掌握版图设计中关于 Pad 的设置和摆放，并能熟练运用； 掌握版图设计中滤波电容的作用，并能熟练运用； 掌握 DRC（Design Rule Check，设计规则检验）和 LVS（Layout Versus Schematic，版图与电路一致性检验）操作，并能运用其对设计的版图进行检查； 掌握版图设计中相关错误的解决方法。 2.2 实验仪器 正确安装了 VMware Workstation 的计算机一台； CentOS 下的 Cadence 集成开发环境一套。 2.3 实验内容 首先根据给出的电路图及相关参数（如图 25 所示）在 Cadence 中绘制出原理图，考虑到后续版图中需要添加滤波电容，因此我们在电路图的绘制中需要提前加入滤波电容。在前面的基础上设计与之相对应的版图。在设计版图的过程中，需要注意对称性以及紧凑型；此外，还需要为引出的端点设置 Pad，以方便后续的封装和调试。对设计完的版图进行 DRC 以及 LVS 检查，通过上述检查后，方可确认版图设计完成且准确无误。\n图 25：CMOS 带隙基准源电路图\n2.4 操作说明 由于在上一部分已经提到了关于 CentOS 下 Cadence 开发环境中相关快捷键的功能，因此在此处略下不表。\n2.5 电路绘制 本次的 CMOS 带隙基准源主要分为两部分，首先是预稳压电路，它的用途是为后级提供预稳压 Vpre，同时为本系统提供所需要的电压偏置。第二部分是基于 MOS 二极管钳位二极管的基准源，由钳位电路、二级运放、BGR 核心电路三个模块组成。考虑到后续需要引出相应的Pad，我们在此设置了四个需要引出的 Pin，包括 vdd、gnd、vpre 和 vout，绘制完成后的电路图如图 26 所示：\n图 26：CMOS 带隙基准源电路图绘制结果\n2.6 版图设计 考虑到在上一部分中已经介绍了相关版图模块的设计，此次版图设计的流程基本不变，故而与前述内容重复的部分，此处不在叙述，仅介绍一些新的需求。\n2.6.1 电容 在此次实验中，我们仍然需要使用电容，但是按照前述的方法，我们仅能调用电容值为 750fF 的电容，但是我们却需要 3pF 的电容。我们使用快捷键 Q 打开属性设置对话框，将 Parameter 页面下的 Total Capacitance 直接修改为 3p，然后会发现系统自动将其设置成了 750f。如图 27 所示：\n图 27：电容参数设置对话框\n此时，我们观察到日志窗口（即系统刚启动时打开的窗口），会发现系统提示“calculated length of 33.0217m exceeds the upper limit of 29u!”，如图 28 所示：\n图 28：系统日志对话框\n此处的问题是在说我们需要的 3pF 的电容，这种情况下计算出来的电容宽度需要 33m，超过了电容宽度的最大值 29u。此时的解决方法是通过多了电容进行并联来获得较大的电容值。此时我们需要设置 Capacitor Rows 和 Capacitor Columns，此处我们设置成 3×3，然后再将 Total Capacitance 修改为 3p即可完成大电容的调用，修改后的参数设置对话框如图 29 所示：\n图 29：修改后的电容设置对话框\n调用出来的电容就是一个 3×3 的阵列电容，如图 30 所示，可以发现，系统已经自动将这 9 个单独的电容并联起来，这样极大的方便了我们的操作。\n图 30：阵列电容示意图\n2.6.2 电阻 电阻元件在第一次实验中并未接触，故在此对其进行详细的介绍。在我们所使用的工艺库有五种不同的电容，如图 31 所示：\n图 31：电阻分类\n它们分别是 diff（扩散区）、metal（金属）、nwell（N阱）、poly（多晶硅）、primitives。观察我们此次需要使用的电阻值的大小，它们都相对较大，考虑到 CMOS 课程中涉及的电阻制作方法，我们在此处采用多晶硅电阻，即 poly 类型，同时选择 HRPOLYU3 型号的电阻，调用出来的电阻如图 32 所示：\n图 32：多晶硅电阻默认版图\n我们发现，电阻具有三端结构，其中两端作为普通电阻的两端，剩下的一端为有源区需要进行接地。使用快捷键 Q 打开电阻的属性菜单，如图 33 所示：\n图 33：电阻属性设置对话框\n我们首先看到 Calculated Parameter 这一选项，这和我们在上一部分中电容的选项一样，用于选择需要计算得到的结果，我们选择 Length，然后将电阻值修改成我们所需要的大小，单击 OK 即可看到对应的电阻。\n但是我们会发现，这样得到的电阻非常的长，因此需要对其继续修改，同样打开属性设置对话框，我们需要修改 Segments 这一选项，即设置电阻是通过多少段相同的电阻串联而成，这样可以有效的减少电阻的长度，此处我们将其设置为 8。此外，在进行布局时，可能会发现电阻的宽度不匹配，此时可以修改 Segment Width 参数来对齐进行调整，此处我们设置成 1.5u，得到的电阻如图 34 所示：\n图 34：调整后的电阻版图\n2.6.3 BJT 本次实验中出现的另一个未接触过的器件便是 BJT，我们选用 PNP2 型的 BJT 管。在实验要求中，需要我们对 BJT 中的参数 m 进行调整，但是当我们打开 BJT 的属性设置对话框后，发现其中的参数 m 无法修改，如图 35 所示：\n图 35：BJT 属性设置对话框\n单个 BJT 的版图如图 36 所示：\n图 36：BJT 默认版图\n可以观察到，BJT 版图中中心有一个金属，外面有两个金属环，它们依次对应了 BJT 的发射极（E）、集电极（C）和基极（B）。\n考虑到我们需要调用一个 m=8 的 BJT 管，可以采用 8 个 BJT 管并联的方法来实现这一要求，具体的操作步骤是在创建实例的时修改 Rows 和 Columns，此处修改为 2×4，如图 37 所示：\n图 37：BJT 实例创建对话框\n在后续的版图设计中，我们还需要认为的将这些 BJT 管并联才能达到我们所要求的目的，这样就解决了参数 m 无法修改的问题。这样就能够得到 m=8 的 BJT 的版图如图 38 所示：\n图 38：BJT 版图（m=8）\n2.6.4 Pad 为了使得芯片内引线与管芯相连，需要在芯片的四周放置比较大的压焊块（Pad），将它们与电路中相应的结点相连，如图 39 所示：\n图 39：芯片上的键合压焊盘\n压焊块的主要结构有：①最上层金属；②最上两层金属，金属间由通孔相连。如图 40 所示：\n图 40：压焊块结构\n同时，为了防止压焊过程中出现串通，有时需要在压焊块的金属下面加入 N 阱和多晶硅等层，以防止串通。如图 41 所示（用于除 GND 以外的电极，GND 压焊块上没有多晶硅和 N 阱层）：\n图 41：压焊块实例\n在本次实验中，为了方便后续测试，我们需要在测试点加上 Pad，有些工艺将 Pad 看作一个单独的器件，其有自己独有的 DRC 规则，但是我们此处只是把 Pad 当作金属来处理，因此我们的 Pad 需要使用六层金属（M1、M2、M3、M4、M5、M6）堆叠起来，并通过通孔相连。\n关于 Pad 的尺寸要求是 75μm×75μm，但是考虑到金属 DRC 中的一条规则：金属的最大宽度不得超过 35μm，因此我们需要对 Pad 进行切割，即将 75μm 宽的 Pad 切割成 3 个 24μm 宽的条状金属加上 3μm 的空隙。对于 M6、M4、M2 我们采用垂直切割法，对于 M5、M3、M1 我们采用水平切割法，并且在对应的地方放置通孔，使得六层金属全部连通起来。最后得到的 Pad 版图如图 42 所示：\n图 42：Pad 版图\n2.6.5 滤波电容 滤波电容的本质是对于电容的运用，从上述 Pad 模块的版图我们可以发现 Pad 的面积较大，因此版图中可能会有很多空出来的区域，为了版图的完整性和填充度，并且考虑到信号的抗干扰能力，我们需要在空出的区域内加上滤波电容。滤波电容跨接在 vdd 和 gnd 之间，当电源信号有一个微小波动时，我们可以将其等效为在直流信号上叠加了一个微变的交流信号，那么这个交流信号就能够通过滤波电容流到地上，从而消除了对系统的影响。\n在集成电路的设计过程中，适当的添加滤波电容是非常有必要的，本实验中我们在原理图中添加了滤波电容，故而在版图中也需要添加滤波电容。与之前添加电容的方式不同，此次添加的电容大小并没有要求，但是由于需要将其铺满版图中的空闲区域，因此对于它的尺寸有了要求，我们可以在参数设置对话框中将 Calculated Parameter 选择为 capacitance，这样我们就可以自由地调节电容的尺寸以填满版图的空隙，此处我们将 Unit Width 和 Unit Height 设置成 7.5μm×7.5μm。\n但是电容具有最小的面积——$25~\\mathrm{\\mu m^2}，因此，如果需要设置面积更小的电容，我们可以在电容设置对话框中去除 Apply Ring MCT 的复选框，这样最终的电容参数设置对话框中内容如图 43 所示：\n图 43：滤波电容参数设置\n2.6.6 综合布局 综合上述各个模块，在保证版图对称性和紧凑性的前提下，为版图添加 Pad 以及滤波电容，合理布局后，最终设计出的版图如图 44 所示：\n图 44：CMOS 带隙基准源版图\n2.7 心得体会 2.7.1 布局思路 在布局的时候，可以首先确定一些较大的元器件的位置，然后将相同特征的元器件按照上一步确定的位置进行轴对称布局。在这一过程中，除了差分对管需要考虑将其放在一起并且对称外，其余的晶体管可以先不考虑其在电路图中的相对位置，首先将对称的布局做出来。\n其次，在元器件布局完成后，可以在周围放置一圈 vdd 和 gnd，而不是仅在上方放置 vdd，在下方放置 gnd，相较于后一种方式，放置一圈电源线对于后期的布局更为有利。\n在布局过程中，可能会出现某个地方放置一个元器件显得空闲区域太多，此时我们可以将其分成两个元器件，并将其并联起来以达到扩大区域的目的。\n最后，对于版图中存在的较大的空闲区域，我们可以添加滤波电容，合理的调节滤波电容的大小，使得它能够填满整个空闲区域，从而完成版图填充度的要求。\n按照上述的步骤进行布局，一般来说可以在保证版图对称性的前提下进一步提高版图的紧凑性，以解决版图中空隙较大的问题。\n2.7.2 布线思路 布局完成后就需要进行布线了，在布线的过程中，发现了一种较为方便且快速的布线方法，叙述如下。\n首先，在版图布局的时候将各个元器件进行命名，使得其具有和电路图一样的标识（例如 M1、R1、C1、Q1 等），以方便后续的操作。\n其次，在布线的时候，参照电路图，从上到下，从左到右，对每一个晶体管进行布线，连线的时候综合考虑元器件之间的位置，途径的元器件，采用合适的金属将其连接起来。当从某个元器件出发的所有导线都布局完成后，在电路图上用笔做一个标记。\n重复上一过程，即可在较短的时间内，较为合理的将所有的导线布局完成。\n2.7.3 布线错误 最后需要讲到的一个问题是 LVS 时经常遇到的一个错误，它的错误信息通常非常简单，和上一部分给出的图例类似，故在此不再展示。它所描述的错误依旧是连接问题，但是简单的从电路图上无法看出任何的问题。\n此时就需要介绍到一个用于查看单层材料布局的方法，首先打开 LSW 窗口，如图 45 所示：\n图 45：LSW 窗口\n可以发现，上面有各种布局所用到的材料，我们选择 M1，然后单击上方的 NV 按钮，即可仅查看 M1 连接，可以看到如图 46 所示的结果：\n图 46：单层材料布局查看\n然后我们回到 LSW 窗口，再点击 M2，即可在查看 M1 的基础上再查看 M2 金属的布局。这样一层一层的往上查看时，会发现出错的布线在同一层与其它同种类型的金属线交叉从而造成了短路，形成了 LVS 错误。这种错误通常非常隐蔽，因此需要通过上面介绍到的单层材料布局查看法来进行检查。\n至此，整个版图的设计以及检查就完成了，最终成功通过了 LVS 验证，结果如图 47 所示：\n图 47：LVS 最终结果\n三、疑问 通过这两个版图的实验，学习到了狠多版图方面的知识，同时也产生了一些疑惑，以及一些相关的思考，现列举如下。\n在布局的时候发现电容是一个较大的器件，而且电容仅包含 M5 和 M6，在版图设计的过程中，以及尝试过在电容下面走线的布线方式，现在考虑能否将晶体管也放置在电容下方，因为电容与晶体管不在同一层上，故而可以更大程度上的利用面积，从而减小系统的体积，增大集成度。\n此外，考虑到 Pad 的面积也较为庞大，因此，能否将一些其它的器件布置于 Pad 下方，例如电阻等。\n最后，Cadence 版图设计系统是否可以开发出一种三维视图的功能，这样在布局不限的时候能够非常清楚各个层中的材料位置，更大的方便了布线的过程，减少了短路的可能。\n（整理至此，方觉当年之愚钝，姑且当做是一种留念吧；各位看官也请有针对性的参考其中的内容。）\n","wordCount":"9249","inLanguage":"en","datePublished":"2022-12-21T11:09:00+08:00","dateModified":"2022-12-21T11:09:00+08:00","author":{"@type":"Person","name":"Kai Wang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://kwang.life/2022/12/%E9%9B%86%E6%88%90%E7%94%B5%E8%B7%AF%E7%89%88%E5%9B%BE%E8%AE%BE%E8%AE%A1%E5%AE%9E%E9%AA%8C%E4%BB%A5%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8%E5%92%8C%E5%B8%A6%E9%9A%99%E5%9F%BA%E5%87%86%E6%BA%90%E4%B8%BA%E4%BE%8B/"},"publisher":{"@type":"Organization","name":"退思轩","logo":{"@type":"ImageObject","url":"https://kwang.life/favicons/apple-touch-icon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://kwang.life accesskey=h title="退思轩 (Alt + H)"><img src=https://kwang.life/favicons/apple-touch-icon.png alt aria-label=logo height=32>退思轩</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://kwang.life/ title=🏠首页><span>🏠首页</span></a></li><li><a href=https://kwang.life/archives/ title=📔归档><span>📔归档</span></a></li><li><a href=https://kwang.life/tags/ title=🏷️标签><span>🏷️标签</span></a></li><li><a href=https://kwang.life/search/ title="🔍搜索 (Alt + /)" accesskey=/><span>🔍搜索</span></a></li><li><a href=https://kwang.life/categories/ title=🗂️分类><span>🗂️分类</span></a></li><li><a href=https://kwang.life/friends/ title=🌏邻居><span>🌏邻居</span></a></li><li><a href=https://kwang.life/about/ title=📜关于><span>📜关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>集成电路版图设计实验（以运算放大器和带隙基准源为例）</h1><div class=post-meta><span title='2022-12-21 11:09:00 +0800 +0800'>2022年12月21日</span>&nbsp;·&nbsp;19 min&nbsp;·&nbsp;9249 words&nbsp;·&nbsp;Kai Wang&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e4%b8%80%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8 aria-label=一、运算放大器>一、运算放大器</a><ul><li><a href=#11-%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84 aria-label="1.1 实验目的">1.1 实验目的</a></li><li><a href=#12-%e5%ae%9e%e9%aa%8c%e4%bb%aa%e5%99%a8 aria-label="1.2 实验仪器">1.2 实验仪器</a></li><li><a href=#13-%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9 aria-label="1.3 实验内容">1.3 实验内容</a></li><li><a href=#14-%e6%93%8d%e4%bd%9c%e8%af%b4%e6%98%8e aria-label="1.4 操作说明">1.4 操作说明</a></li><li><a href=#15-%e7%94%b5%e8%b7%af%e7%bb%98%e5%88%b6 aria-label="1.5 电路绘制">1.5 电路绘制</a></li><li><a href=#16-%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1 aria-label="1.6 版图设计">1.6 版图设计</a><ul><li><a href=#161-%e6%99%b6%e4%bd%93%e7%ae%a1 aria-label="1.6.1 晶体管">1.6.1 晶体管</a></li><li><a href=#162-%e7%94%b5%e5%ae%b9 aria-label="1.6.2 电容">1.6.2 电容</a></li><li><a href=#163-%e4%b8%ad%e5%bf%83%e5%af%b9%e7%a7%b0%e6%8a%80%e6%9c%af aria-label="1.6.3 中心对称技术">1.6.3 中心对称技术</a></li><li><a href=#164-%e5%b1%8f%e8%94%bd%e6%8a%80%e6%9c%af aria-label="1.6.4 屏蔽技术">1.6.4 屏蔽技术</a></li><li><a href=#165-%e5%ba%95%e5%b1%82%e8%ae%be%e8%ae%a1 aria-label="1.6.5 底层设计">1.6.5 底层设计</a></li><li><a href=#166-%e7%bb%bc%e5%90%88%e8%ae%be%e8%ae%a1 aria-label="1.6.6 综合设计">1.6.6 综合设计</a></li></ul></li><li><a href=#17-%e5%bf%83%e5%be%97%e4%bd%93%e4%bc%9a aria-label="1.7 心得体会">1.7 心得体会</a><ul><li><a href=#171-%e5%b8%b8%e8%a7%81%e9%94%99%e8%af%af aria-label="1.7.1 常见错误">1.7.1 常见错误</a></li><li><a href=#172-%e7%94%b5%e5%ae%b9%e7%bd%91%e8%a1%a8%e5%8a%a0%e8%bd%bd aria-label="1.7.2 电容网表加载">1.7.2 电容网表加载</a></li><li><a href=#173-lvs-%e9%94%99%e8%af%af%e5%88%86%e6%9e%90 aria-label="1.7.3 LVS 错误分析">1.7.3 LVS 错误分析</a></li></ul></li></ul></li><li><a href=#%e4%ba%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90 aria-label=二、带隙基准源>二、带隙基准源</a><ul><li><a href=#21-%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84 aria-label="2.1 实验目的">2.1 实验目的</a></li><li><a href=#22-%e5%ae%9e%e9%aa%8c%e4%bb%aa%e5%99%a8 aria-label="2.2 实验仪器">2.2 实验仪器</a></li><li><a href=#23-%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9 aria-label="2.3 实验内容">2.3 实验内容</a></li><li><a href=#24-%e6%93%8d%e4%bd%9c%e8%af%b4%e6%98%8e aria-label="2.4 操作说明">2.4 操作说明</a></li><li><a href=#25-%e7%94%b5%e8%b7%af%e7%bb%98%e5%88%b6 aria-label="2.5 电路绘制">2.5 电路绘制</a></li><li><a href=#26-%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1 aria-label="2.6 版图设计">2.6 版图设计</a><ul><li><a href=#261-%e7%94%b5%e5%ae%b9 aria-label="2.6.1 电容">2.6.1 电容</a></li><li><a href=#262-%e7%94%b5%e9%98%bb aria-label="2.6.2 电阻">2.6.2 电阻</a></li><li><a href=#263-bjt aria-label="2.6.3 BJT">2.6.3 BJT</a></li><li><a href=#264-pad aria-label="2.6.4 Pad">2.6.4 Pad</a></li><li><a href=#265-%e6%bb%a4%e6%b3%a2%e7%94%b5%e5%ae%b9 aria-label="2.6.5 滤波电容">2.6.5 滤波电容</a></li><li><a href=#266-%e7%bb%bc%e5%90%88%e5%b8%83%e5%b1%80 aria-label="2.6.6 综合布局">2.6.6 综合布局</a></li></ul></li><li><a href=#27-%e5%bf%83%e5%be%97%e4%bd%93%e4%bc%9a aria-label="2.7 心得体会">2.7 心得体会</a><ul><li><a href=#271-%e5%b8%83%e5%b1%80%e6%80%9d%e8%b7%af aria-label="2.7.1 布局思路">2.7.1 布局思路</a></li><li><a href=#272-%e5%b8%83%e7%ba%bf%e6%80%9d%e8%b7%af aria-label="2.7.2 布线思路">2.7.2 布线思路</a></li><li><a href=#273-%e5%b8%83%e7%ba%bf%e9%94%99%e8%af%af aria-label="2.7.3 布线错误">2.7.3 布线错误</a></li></ul></li></ul></li><li><a href=#%e4%b8%89%e7%96%91%e9%97%ae aria-label=三、疑问>三、疑问</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener('DOMContentLoaded',function(){checkTocPosition(),elements=document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]'),activeElement=elements[0];const e=encodeURI(activeElement.getAttribute('id')).toLowerCase();document.querySelector(`.inner ul li a[href="#${e}"]`).classList.add('active')},!1),window.addEventListener('resize',function(){checkTocPosition()},!1),window.addEventListener('scroll',()=>{elements&&(activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute('id')).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add('active'):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove('active')}))},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue('--gap'),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>（<em>本文根据 2017 年本科三年级的课程试验报告整理而来。当年采用的是 ICFB 软件，时至今日已广泛采用 IC617，但我认为这份材料依旧不乏可取之处，分享如下。</em>）</p><h2 id=一运算放大器>一、运算放大器<a hidden class=anchor aria-hidden=true href=#一运算放大器>#</a></h2><h3 id=11-实验目的>1.1 实验目的<a hidden class=anchor aria-hidden=true href=#11-实验目的>#</a></h3><ol><li>熟悉 CentOS 下的 Cadence 集成开发环境；</li><li>掌握元件库的调用方法，并由此进行原理图绘制及版图设计；</li><li>掌握版图设计中对称性和紧凑性的要求，并能熟练运用；</li><li>掌握版图设计中的中心对称技术和屏蔽技术，并能熟练运用；</li><li>掌握 DRC（Design Rule Check，设计规则检验）和 LVS（Layout Versus Schematic，版图与电路一致性检验）操作，并能运用其对设计的版图进行检查；</li><li>掌握版图设计中相关错误的解决方法。</li></ol><h3 id=12-实验仪器>1.2 实验仪器<a hidden class=anchor aria-hidden=true href=#12-实验仪器>#</a></h3><ol><li>正确安装了 VMware Workstation 的计算机一台；</li><li>CentOS 下的 Cadence 集成开发环境一套。</li></ol><h3 id=13-实验内容>1.3 实验内容<a hidden class=anchor aria-hidden=true href=#13-实验内容>#</a></h3><p>首先根据给出的电路图及相关参数（如图 1 所示）在 Cadence 中绘制出原理图，并在此基础上设计与之相对应的版图。在设计版图的过程中，需要注意对称性以及紧凑型；此外，还需要运用屏蔽技术和叉指技术。对设计完的版图进行 DRC 以及 LVS 检查，通过上述检查后，方可确认版图设计完成且准确无误。</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/01.jpg alt="图 1：运算放大器电路图"><figcaption><p>图 1：运算放大器电路图</p></figcaption></figure><h3 id=14-操作说明>1.4 操作说明<a hidden class=anchor aria-hidden=true href=#14-操作说明>#</a></h3><p>在 CentOS 下的 Cadence 集成开发环境中，快捷键的使用显得尤为重要。正确合理地使用快捷键能够极大的加快原理图及版图的绘制过程。现将常用的快捷键列出如下：</p><table><thead><tr><th style=text-align:right>快捷键</th><th style=text-align:left>描述</th></tr></thead><tbody><tr><td style=text-align:right>F</td><td style=text-align:left>将当前视图设置为满屏显示</td></tr><tr><td style=text-align:right>Shift+Z</td><td style=text-align:left>将当前视图缩小两倍</td></tr><tr><td style=text-align:right>Ctrl+Z</td><td style=text-align:left>将当前视图放大两倍</td></tr><tr><td style=text-align:right>↑ ↓ ← →</td><td style=text-align:left>对当前视图进行上下左右移动</td></tr><tr><td style=text-align:right>I</td><td style=text-align:left>调用器件实例</td></tr><tr><td style=text-align:right>P</td><td style=text-align:left>原理图中添加 Pin，版图中添加 Path</td></tr><tr><td style=text-align:right>W</td><td style=text-align:left>原理图中添加 Wire</td></tr><tr><td style=text-align:right>L</td><td style=text-align:left>版图中添加 Label</td></tr><tr><td style=text-align:right>O</td><td style=text-align:left>版图中添加通孔</td></tr><tr><td style=text-align:right>R</td><td style=text-align:left>版图中添加矩形</td></tr><tr><td style=text-align:right>S</td><td style=text-align:left>版图中拉伸图形</td></tr><tr><td style=text-align:right>K</td><td style=text-align:left>版图中添加标尺</td></tr><tr><td style=text-align:right>Shift+K</td><td style=text-align:left>清除版图中所有标尺</td></tr><tr><td style=text-align:right>Q</td><td style=text-align:left>查看当前选中器件的属性</td></tr><tr><td style=text-align:right>M</td><td style=text-align:left>移动操作</td></tr><tr><td style=text-align:right>U</td><td style=text-align:left>撤销操作</td></tr><tr><td style=text-align:right>Ctrl+D</td><td style=text-align:left>取消当前器件的选择</td></tr><tr><td style=text-align:right>F3</td><td style=text-align:left>调出位置排版工具栏，可进行器件上下、左右的反转</td></tr><tr><td style=text-align:right>ESC</td><td style=text-align:left>取消操作</td></tr><tr><td style=text-align:right>DELETE</td><td style=text-align:left>删除操作</td></tr></tbody></table><h3 id=15-电路绘制>1.5 电路绘制<a hidden class=anchor aria-hidden=true href=#15-电路绘制>#</a></h3><p>我们需要首先创建一个 Library，其中 Name 为 Library 的名字，我们在此填入 lecture，如图 2 所示，我们接下来的所有操作都将在这个 Library 中进行。</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/02.png alt="图 2：Library 创建对话框"><figcaption><p>图 2：Library 创建对话框</p></figcaption></figure><p>在绘制电路图之前，我们还需要创建一个 Cell View，其中 Cell Name 为 Cell View 的名字，我们在此填入 opamp，在 Tool 下拉框中选择 Composer-Schematic，可以看到 View Name 中的内容为 schematic 表示我们此次创建的文件为电路图，如图 3 所示。</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/03.png alt="图 3：Cell View 创建对话框"><figcaption><p>图 3：Cell View 创建对话框</p></figcaption></figure><p>单击 OK 后，程序会弹出一个操作窗口用于绘制电路图。在这个界面下，我们可以使用上面提到过的快捷键操作进行原理图的绘制。此处我们使用快捷键 I 来添加一个元件实例，如图 4 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/04.png alt="图 4：Instance 创建对话框"><figcaption><p>图 4：Instance 创建对话框</p></figcaption></figure><p>单击“Browse”菜单，在弹出的“Library Browser”对话框中，勾选 Show Categories，表示将器件库中的器件按照类别分类后再进行显示。我们在从左到右四个栏目中依次选择 GSMC_R018S6D0 -> mos -> PCH（对应于 PMOS）或 NCH（对应于 NMOS）-> symbol，如图 5 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/05.png alt="图 5：Library Browser 对话框"><figcaption><p>图 5：Library Browser 对话框</p></figcaption></figure><p>再进行了上述选择后，图 4 的对话框会发生相应的变化，如图 6 所示。其中的 Multiplier、Total Width、Height 等均可根据电路图的不同参数进行设置。</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/06.png alt="图 6：Instance 设置对话框"><figcaption><p>图 6：Instance 设置对话框</p></figcaption></figure><p>但有时我们不希望直接对 Total Width 进行设置，而希望通过修改 Finger Width 和 Fingers 对 MOS 的尺寸进行修改，此时我们只需要取消 Apply Threshold 的复选框即可实现这一目的。其次，我们还可以在 Names 编辑框中给 MOS 进行命名，以区分不同的 MOS，这在器件较多时能够更方便的对电路图中的器件进行定位，以方便后续的版图设计以及查错。剩余的选项，例如 GATE Connection、Switch S/D、Bodytie Type 等我们将在版图设计的过程中一一介绍它们的功能。</p><p>此处我们只需要根据设计要求给定的元器件参数对其进行修改后，在窗口中单击，即可创建一个元件实例。</p><p>除了晶体管之外，我们在这个电路图中还需要用到电容，需要在 Library Browser 对话框中选择 GSMC_R018S6D0 -> cap -> CMIM -> symbol 进行调用。需要注意的是这里的电容具有三个端子，其中两端为电容的正负极，另一端需要接地。</p><p>重复上一步的操作，按照图 1 的电路及参数进行设置和绘制，即可得到相应的电路图，如图 7 所示，可以观察到每个器件边上都有其对应的名称和参数，极大的方便了我们的工作。同时可以观察到电路图的左边是二级运算放大器电路，右边是共模负反馈结构。</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/07.png alt="图 7：运算放大器电路图绘制结果"><figcaption><p>图 7：运算放大器电路图绘制结果</p></figcaption></figure><h3 id=16-版图设计>1.6 版图设计<a hidden class=anchor aria-hidden=true href=#16-版图设计>#</a></h3><h4 id=161-晶体管>1.6.1 晶体管<a hidden class=anchor aria-hidden=true href=#161-晶体管>#</a></h4><p>如同绘制电路图一样，我们采用快捷键 I 来创建晶体管的版图，与之前不同的是，我们将选择 layout 而非 symbol，创建后的版图如图 8 所示（以 PCH 为例）：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/08.png alt="图 8：晶体管默认版图"><figcaption><p>图 8：晶体管默认版图</p></figcaption></figure><p>接下来，我们需要像电路图中一样，对它的参数进行设置，选中晶体管，使用快捷键 Q 打开属性对话框，如图 9 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/09.png alt="图 9：晶体管属性对话框"><figcaption><p>图 9：晶体管属性对话框</p></figcaption></figure><p>可以看到，这里面同样有 Total Width、Length、Finger Width 和 Fingers 选项，这些设置和电路图中的设置是一样的。此处我们需要介绍的是参数为GATE Connection、Switch S/D、Bodytie Type。</p><p>其中 GATE Connection 用于设置晶体管中各个 finger 之间的栅极的了解情况，一般来说我们选择 Top 或 Bottom 即可，也就是说在晶体管的一侧将栅极都连接在一起。</p><p>接下来的 Switch S/D 用于交换源漏端子，由于 MOS 器件是一种对称器件，因此在连接之前交换源漏不影响晶体管的特性，但有时却可以方便我们版图的布线。</p><p>最后是 Bodytie Type 设置，这是用来设置衬底的，它一共有三种选项，分别为 None、Integrated 和 Detached。第一个选项表示无衬底，此时衬底需要我们自行绘制，故不推荐此选项；第二个选项表示衬底和 MOS 的源或漏连在一起，适用于 PMOS 源接高电平或 NMOS 漏接地这两种情况；第三个选项表示衬底与 MOS 器件是分离的，适用于源漏不在高低电平上的情况。</p><p>至此，我们对于晶体管的调用就完成了。</p><h4 id=162-电容>1.6.2 电容<a hidden class=anchor aria-hidden=true href=#162-电容>#</a></h4><p>我们同样采用快捷键 I 来创建一个电容的版图实例，如图 10 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/10.png alt="图 10：电容默认版图"><figcaption><p>图 10：电容默认版图</p></figcaption></figure><p>可以发现，电容的版图相较于晶体管的版图显得尤为大。同样，我们选中电容，运用快捷键 Q 打开电容属性对话框，如图 11 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/11.png alt="图 11：电容属性对话框"><figcaption><p>图 11：电容属性对话框</p></figcaption></figure><p>由于在电路图绘制中没有解释过电容的相关参数，故在此处详细介绍一下电容的相关设置。首先看到有这些参数：Total Capacitance、Unit Capacitance、Unit Width、Unit Height、Capacitor Rows、Capacitor Columns。在这些参数中 Total Capacitance 可以通过 Unit Capacitance、Capacitor Rows、Capacitor Columns 计算得到。而 Unit Capacitance 又可以通过 Unit Width、Unit Height 计算得到。（可以观察 Area Capacitance 对话框显示为 $1~\mathrm{fF/um^2}$）</p><p>有了上述的基础后，我们看到 Calculate Parameter 这个选项，由于这些参数并不是独立的，因此可以通过其中的某些参数计算得出其它的参数，这个 Calculate Parameter 就是用于选择需要计算的参数。此处我们已知了总电容的大小，因此将其选择为 width & length 表示宽度和高度均需要通过计算得出，这样我们只需要在 Total Capacitance 中填入我们电容的大小就可以完成电容量的设置了。</p><p>继续往下看，可以发现还有 PSUB Left Bar、PSUB Right Bar、PSUB Top Bar、PSUB Bottom Bar 这四个选项，这对应于电路图中的接地端子，一般我们只需要选择一侧即可。</p><p>此外，需要注意的是，电容的正极材料为 M6，负极材料为 M5，接地材料为 M1。</p><h4 id=163-中心对称技术>1.6.3 中心对称技术<a hidden class=anchor aria-hidden=true href=#163-中心对称技术>#</a></h4><p>电路图中存在着多个 MOS 差分对，我们选择其中的一对进行分析，如图 12 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/12.png alt="图 12：差分对实例"><figcaption><p>图 12：差分对实例</p></figcaption></figure><p>在实际流片过程中，芯片在晶圆上制作完成后需要切割成一块块的裸片，在切割过程中方向是不确定的，而且很可能出现切割失误。在最坏的情况下，其中一个晶体管被切割掉，从而导致整个电路无法政策工作。因此需要采用中心对称技术，如图 13 所示（其中 A、B 为差分对管）。这样不论如何切割，将同时切除差分对管相同的部分，从而对差分对管的功能影响并不是很大。</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/13.png alt="图 13：中心对称示意图"><figcaption><p>图 13：中心对称示意图</p></figcaption></figure><p>在绘制版图的过程中，将对应 MOS 管的长度不变，宽度变为一半，按照图 13 的布局要求，将差分对管进行布局，并将其对应的栅、源、漏三端相连，即可完成差分对管的版图设计，如图 14 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/14.png alt="图 14：差分对管版图设计"><figcaption><p>图 14：差分对管版图设计</p></figcaption></figure><h4 id=164-屏蔽技术>1.6.4 屏蔽技术<a hidden class=anchor aria-hidden=true href=#164-屏蔽技术>#</a></h4><p>在集成电路中存在着很多的干扰，这就要求我们适当地运用一些屏蔽技术来改善这一问题。一般情况下，可以将差分对管放置在屏蔽环内，这样可以有效减少周围器件对差分对管的干扰。对于 PMOS 对管，我们可以将其放置在 NGR 组成的屏蔽环内；对于 NMOS 对管，我们可以将其放置在 PGR 组成的屏蔽环内。对于某些要求更为严格的电路，可能需要采用双屏蔽环结构来屏蔽干扰。在本实验中，我们仅采用单环屏蔽结构。</p><p>使用快捷键 O 打开 Contact 创建对话框，如图 15 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/15.png alt="图 15：Contact 创建对话框"><figcaption><p>图 15：Contact 创建对话框</p></figcaption></figure><p>在本例中 Contact Type 选择 NGR，并且根据晶体管的尺寸适当的调整 Rows、Columns 参数，使得 NGR 能够包围整个差分对管，设计完成后的结果如图 16 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/16.png alt="图 16：添加屏蔽环后的差分对管版图"><figcaption><p>图 16：添加屏蔽环后的差分对管版图</p></figcaption></figure><h4 id=165-底层设计>1.6.5 底层设计<a hidden class=anchor aria-hidden=true href=#165-底层设计>#</a></h4><p>若差分对管的电流系数不对称，很有可能造成整个电路的“失调”，为了减小失调电压以及失调电流，在版图设计上需要遵循对称设计的原则。最常见的对称设计是“几何轴对称设计”。也就是说版图中的各个元器件布局需要尽可能的放在轴对称的位置上。</p><h4 id=166-综合设计>1.6.6 综合设计<a hidden class=anchor aria-hidden=true href=#166-综合设计>#</a></h4><p>综合上述各个模块，运用叉指技术、屏蔽技术，同时注意版图布局的对称性和紧凑型，最后我们设计出的版图如图 17 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/17.png alt="图 17：运算放大器版图"><figcaption><p>图 17：运算放大器版图</p></figcaption></figure><h3 id=17-心得体会>1.7 心得体会<a hidden class=anchor aria-hidden=true href=#17-心得体会>#</a></h3><h4 id=171-常见错误>1.7.1 常见错误<a hidden class=anchor aria-hidden=true href=#171-常见错误>#</a></h4><ol><li>在 Cadence 环境下所有的单位都是默认的，不需要额外输入单位，否则容易造成错误；如果需要输入单位，必须使用小写英文字母。</li><li>在进行版图设计时，需要注意设计规则，例如 M1 之间的最小间距为 0.23μm，M2 之间的最小间距为 0.28μm，NW 之间的最小间距为 1.4μm 等，记住这些设计规则，能够极大地简化版图设计的过程，防止全部布局完成后 DRC 错误导致重新布局，从而影响整体设计。</li><li>在进行电容的连线时，需要注意 M6 是电容正极，M5 是电容负极，此外电容有源区需要接地。</li></ol><h4 id=172-电容网表加载>1.7.2 电容网表加载<a hidden class=anchor aria-hidden=true href=#172-电容网表加载>#</a></h4><p>在版图设计完成后，运行 LVS 时，提示“Error: No matching &ldquo;.SUBCKT&rdquo; statement for &ldquo;cmim&rdquo; at line xxx”，如图 18 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/18.png alt="图 18：LVS 错误信息"><figcaption><p>图 18：LVS 错误信息</p></figcaption></figure><p>出现这个问题的原因时由于缺少电容的网表描述文件，具体的解决方法如下：切换到 Inputs 页面，选择 Netlist 板块，在 Files 选项中单击 … 按钮，打开浏览窗口，如图 19 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/19.png alt="图 19：文件浏览对话框"><figcaption><p>图 19：文件浏览对话框</p></figcaption></figure><p>在对话框中切换到路径“/home/iclayout/projects/IC-gsmc180/pdk/GSMC180nm_v1p6/Net list”，选择其中的 subcircuit.cdl 文件，单击 Add 后系统会弹出如图 20 所示的对话框，选择 Add at end，即可完成电容的网表描述文件的添加。再添加完网表描述文件后即可正确进行 LVS 功能。</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/20.png alt="图 20：确认对话框"><figcaption><p>图 20：确认对话框</p></figcaption></figure><h4 id=173-lvs-错误分析>1.7.3 LVS 错误分析<a hidden class=anchor aria-hidden=true href=#173-lvs-错误分析>#</a></h4><p>在运行 LVS 后，可能会出现问题，常见的问题有以下几种，我们将一一对其进行分析。首先遇到的是寄生提取过程中的错误，其错误信息如图 21 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/21.png alt="图 21：LVS 错误一"><figcaption><p>图 21：LVS 错误一</p></figcaption></figure><p>出现这个问题的原因是由于引脚 Label 没有正确的打到对应的金属上，可能是位置没有放置正确，也可能是材料使用错误。</p><p>第二个问题也是较为常见的，它的错误信息如图 22 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/22.png alt="图 22：LVS 错误二"><figcaption><p>图 22：LVS 错误二</p></figcaption></figure><p>造成这个错误的原因主要是存在尚未正确连接到对应端口上的器件，此时我们可以单击上面的 16，系统会自动弹出对应的版图和电路图，如图 23 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/23.png alt="图 23：LVS 电路图版图对应图"><figcaption><p>图 23：LVS 电路图版图对应图</p></figcaption></figure><p>该窗口会将存在问题的线路进行高亮显示，从而方便我们定位问题。再找到这些问题以后，将连接补上，即可通过 LVS 的验证，最终结果如图 24 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/24.png alt="图 24：LVS 最终结果"><figcaption><p>图 24：LVS 最终结果</p></figcaption></figure><h2 id=二带隙基准源>二、带隙基准源<a hidden class=anchor aria-hidden=true href=#二带隙基准源>#</a></h2><h3 id=21-实验目的>2.1 实验目的<a hidden class=anchor aria-hidden=true href=#21-实验目的>#</a></h3><ol><li>熟悉 CentOS 下的 Cadence 集成开发环境；</li><li>掌握元件库的调用方法，并由此进行原理图绘制及版图设计；</li><li>掌握版图设计中对称性和紧凑性的要求，并能熟练运用；</li><li>掌握版图设计中关于 Pad 的设置和摆放，并能熟练运用；</li><li>掌握版图设计中滤波电容的作用，并能熟练运用；</li><li>掌握 DRC（Design Rule Check，设计规则检验）和 LVS（Layout Versus Schematic，版图与电路一致性检验）操作，并能运用其对设计的版图进行检查；</li><li>掌握版图设计中相关错误的解决方法。</li></ol><h3 id=22-实验仪器>2.2 实验仪器<a hidden class=anchor aria-hidden=true href=#22-实验仪器>#</a></h3><ol><li>正确安装了 VMware Workstation 的计算机一台；</li><li>CentOS 下的 Cadence 集成开发环境一套。</li></ol><h3 id=23-实验内容>2.3 实验内容<a hidden class=anchor aria-hidden=true href=#23-实验内容>#</a></h3><p>首先根据给出的电路图及相关参数（如图 25 所示）在 Cadence 中绘制出原理图，考虑到后续版图中需要添加滤波电容，因此我们在电路图的绘制中需要提前加入滤波电容。在前面的基础上设计与之相对应的版图。在设计版图的过程中，需要注意对称性以及紧凑型；此外，还需要为引出的端点设置 Pad，以方便后续的封装和调试。对设计完的版图进行 DRC 以及 LVS 检查，通过上述检查后，方可确认版图设计完成且准确无误。</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/25.png alt="图 25：CMOS 带隙基准源电路图"><figcaption><p>图 25：CMOS 带隙基准源电路图</p></figcaption></figure><h3 id=24-操作说明>2.4 操作说明<a hidden class=anchor aria-hidden=true href=#24-操作说明>#</a></h3><p>由于在上一部分已经提到了关于 CentOS 下 Cadence 开发环境中相关快捷键的功能，因此在此处略下不表。</p><h3 id=25-电路绘制>2.5 电路绘制<a hidden class=anchor aria-hidden=true href=#25-电路绘制>#</a></h3><p>本次的 CMOS 带隙基准源主要分为两部分，首先是预稳压电路，它的用途是为后级提供预稳压 Vpre，同时为本系统提供所需要的电压偏置。第二部分是基于 MOS 二极管钳位二极管的基准源，由钳位电路、二级运放、BGR 核心电路三个模块组成。考虑到后续需要引出相应的Pad，我们在此设置了四个需要引出的 Pin，包括 vdd、gnd、vpre 和 vout，绘制完成后的电路图如图 26 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/26.png alt="图 26：CMOS 带隙基准源电路图绘制结果"><figcaption><p>图 26：CMOS 带隙基准源电路图绘制结果</p></figcaption></figure><h3 id=26-版图设计>2.6 版图设计<a hidden class=anchor aria-hidden=true href=#26-版图设计>#</a></h3><p>考虑到在上一部分中已经介绍了相关版图模块的设计，此次版图设计的流程基本不变，故而与前述内容重复的部分，此处不在叙述，仅介绍一些新的需求。</p><h4 id=261-电容>2.6.1 电容<a hidden class=anchor aria-hidden=true href=#261-电容>#</a></h4><p>在此次实验中，我们仍然需要使用电容，但是按照前述的方法，我们仅能调用电容值为 750fF 的电容，但是我们却需要 3pF 的电容。我们使用快捷键 Q 打开属性设置对话框，将 Parameter 页面下的 Total Capacitance 直接修改为 3p，然后会发现系统自动将其设置成了 750f。如图 27 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/27.png alt="图 27：电容参数设置对话框"><figcaption><p>图 27：电容参数设置对话框</p></figcaption></figure><p>此时，我们观察到日志窗口（即系统刚启动时打开的窗口），会发现系统提示“calculated length of 33.0217m exceeds the upper limit of 29u!”，如图 28 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/28.png alt="图 28：系统日志对话框"><figcaption><p>图 28：系统日志对话框</p></figcaption></figure><p>此处的问题是在说我们需要的 3pF 的电容，这种情况下计算出来的电容宽度需要 33m，超过了电容宽度的最大值 29u。此时的解决方法是通过多了电容进行并联来获得较大的电容值。此时我们需要设置 Capacitor Rows 和 Capacitor Columns，此处我们设置成 3×3，然后再将 Total Capacitance 修改为 3p即可完成大电容的调用，修改后的参数设置对话框如图 29 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/29.png alt="图 29：修改后的电容设置对话框"><figcaption><p>图 29：修改后的电容设置对话框</p></figcaption></figure><p>调用出来的电容就是一个 3×3 的阵列电容，如图 30 所示，可以发现，系统已经自动将这 9 个单独的电容并联起来，这样极大的方便了我们的操作。</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/30.png alt="图 30：阵列电容示意图"><figcaption><p>图 30：阵列电容示意图</p></figcaption></figure><h4 id=262-电阻>2.6.2 电阻<a hidden class=anchor aria-hidden=true href=#262-电阻>#</a></h4><p>电阻元件在第一次实验中并未接触，故在此对其进行详细的介绍。在我们所使用的工艺库有五种不同的电容，如图 31 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/31.png alt="图 31：电阻分类"><figcaption><p>图 31：电阻分类</p></figcaption></figure><p>它们分别是 diff（扩散区）、metal（金属）、nwell（N阱）、poly（多晶硅）、primitives。观察我们此次需要使用的电阻值的大小，它们都相对较大，考虑到 CMOS 课程中涉及的电阻制作方法，我们在此处采用多晶硅电阻，即 poly 类型，同时选择 HRPOLYU3 型号的电阻，调用出来的电阻如图 32 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/32.png alt="图 32：多晶硅电阻默认版图"><figcaption><p>图 32：多晶硅电阻默认版图</p></figcaption></figure><p>我们发现，电阻具有三端结构，其中两端作为普通电阻的两端，剩下的一端为有源区需要进行接地。使用快捷键 Q 打开电阻的属性菜单，如图 33 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/33.png alt="图 33：电阻属性设置对话框"><figcaption><p>图 33：电阻属性设置对话框</p></figcaption></figure><p>我们首先看到 Calculated Parameter 这一选项，这和我们在上一部分中电容的选项一样，用于选择需要计算得到的结果，我们选择 Length，然后将电阻值修改成我们所需要的大小，单击 OK 即可看到对应的电阻。</p><p>但是我们会发现，这样得到的电阻非常的长，因此需要对其继续修改，同样打开属性设置对话框，我们需要修改 Segments 这一选项，即设置电阻是通过多少段相同的电阻串联而成，这样可以有效的减少电阻的长度，此处我们将其设置为 8。此外，在进行布局时，可能会发现电阻的宽度不匹配，此时可以修改 Segment Width 参数来对齐进行调整，此处我们设置成 1.5u，得到的电阻如图 34 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/34.png alt="图 34：调整后的电阻版图"><figcaption><p>图 34：调整后的电阻版图</p></figcaption></figure><h4 id=263-bjt>2.6.3 BJT<a hidden class=anchor aria-hidden=true href=#263-bjt>#</a></h4><p>本次实验中出现的另一个未接触过的器件便是 BJT，我们选用 PNP2 型的 BJT 管。在实验要求中，需要我们对 BJT 中的参数 m 进行调整，但是当我们打开 BJT 的属性设置对话框后，发现其中的参数 m 无法修改，如图 35 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/35.png alt="图 35：BJT 属性设置对话框"><figcaption><p>图 35：BJT 属性设置对话框</p></figcaption></figure><p>单个 BJT 的版图如图 36 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/36.png alt="图 36：BJT 默认版图"><figcaption><p>图 36：BJT 默认版图</p></figcaption></figure><p>可以观察到，BJT 版图中中心有一个金属，外面有两个金属环，它们依次对应了 BJT 的发射极（E）、集电极（C）和基极（B）。</p><p>考虑到我们需要调用一个 m=8 的 BJT 管，可以采用 8 个 BJT 管并联的方法来实现这一要求，具体的操作步骤是在创建实例的时修改 Rows 和 Columns，此处修改为 2×4，如图 37 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/37.png alt="图 37：BJT 实例创建对话框"><figcaption><p>图 37：BJT 实例创建对话框</p></figcaption></figure><p>在后续的版图设计中，我们还需要认为的将这些 BJT 管并联才能达到我们所要求的目的，这样就解决了参数 m 无法修改的问题。这样就能够得到 m=8 的 BJT 的版图如图 38 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/38.png alt="图 38：BJT 版图（m=8）"><figcaption><p>图 38：BJT 版图（m=8）</p></figcaption></figure><h4 id=264-pad>2.6.4 Pad<a hidden class=anchor aria-hidden=true href=#264-pad>#</a></h4><p>为了使得芯片内引线与管芯相连，需要在芯片的四周放置比较大的压焊块（Pad），将它们与电路中相应的结点相连，如图 39 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/39.png alt="图 39：芯片上的键合压焊盘"><figcaption><p>图 39：芯片上的键合压焊盘</p></figcaption></figure><p>压焊块的主要结构有：①最上层金属；②最上两层金属，金属间由通孔相连。如图 40 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/40.png alt="图 40：压焊块结构"><figcaption><p>图 40：压焊块结构</p></figcaption></figure><p>同时，为了防止压焊过程中出现串通，有时需要在压焊块的金属下面加入 N 阱和多晶硅等层，以防止串通。如图 41 所示（用于除 GND 以外的电极，GND 压焊块上没有多晶硅和 N 阱层）：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/41.png alt="图 41：压焊块实例"><figcaption><p>图 41：压焊块实例</p></figcaption></figure><p>在本次实验中，为了方便后续测试，我们需要在测试点加上 Pad，有些工艺将 Pad 看作一个单独的器件，其有自己独有的 DRC 规则，但是我们此处只是把 Pad 当作金属来处理，因此我们的 Pad 需要使用六层金属（M1、M2、M3、M4、M5、M6）堆叠起来，并通过通孔相连。</p><p>关于 Pad 的尺寸要求是 75μm×75μm，但是考虑到金属 DRC 中的一条规则：金属的最大宽度不得超过 35μm，因此我们需要对 Pad 进行切割，即将 75μm 宽的 Pad 切割成 3 个 24μm 宽的条状金属加上 3μm 的空隙。对于 M6、M4、M2 我们采用垂直切割法，对于 M5、M3、M1 我们采用水平切割法，并且在对应的地方放置通孔，使得六层金属全部连通起来。最后得到的 Pad 版图如图 42 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/42.png alt="图 42：Pad 版图"><figcaption><p>图 42：Pad 版图</p></figcaption></figure><h4 id=265-滤波电容>2.6.5 滤波电容<a hidden class=anchor aria-hidden=true href=#265-滤波电容>#</a></h4><p>滤波电容的本质是对于电容的运用，从上述 Pad 模块的版图我们可以发现 Pad 的面积较大，因此版图中可能会有很多空出来的区域，为了版图的完整性和填充度，并且考虑到信号的抗干扰能力，我们需要在空出的区域内加上滤波电容。滤波电容跨接在 vdd 和 gnd 之间，当电源信号有一个微小波动时，我们可以将其等效为在直流信号上叠加了一个微变的交流信号，那么这个交流信号就能够通过滤波电容流到地上，从而消除了对系统的影响。</p><p>在集成电路的设计过程中，适当的添加滤波电容是非常有必要的，本实验中我们在原理图中添加了滤波电容，故而在版图中也需要添加滤波电容。与之前添加电容的方式不同，此次添加的电容大小并没有要求，但是由于需要将其铺满版图中的空闲区域，因此对于它的尺寸有了要求，我们可以在参数设置对话框中将 Calculated Parameter 选择为 capacitance，这样我们就可以自由地调节电容的尺寸以填满版图的空隙，此处我们将 Unit Width 和 Unit Height 设置成 7.5μm×7.5μm。</p><p>但是电容具有最小的面积——$25~\mathrm{\mu m^2}，因此，如果需要设置面积更小的电容，我们可以在电容设置对话框中去除 Apply Ring MCT 的复选框，这样最终的电容参数设置对话框中内容如图 43 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/43.png alt="图 43：滤波电容参数设置"><figcaption><p>图 43：滤波电容参数设置</p></figcaption></figure><h4 id=266-综合布局>2.6.6 综合布局<a hidden class=anchor aria-hidden=true href=#266-综合布局>#</a></h4><p>综合上述各个模块，在保证版图对称性和紧凑性的前提下，为版图添加 Pad 以及滤波电容，合理布局后，最终设计出的版图如图 44 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/44.png alt="图 44：CMOS 带隙基准源版图"><figcaption><p>图 44：CMOS 带隙基准源版图</p></figcaption></figure><h3 id=27-心得体会>2.7 心得体会<a hidden class=anchor aria-hidden=true href=#27-心得体会>#</a></h3><h4 id=271-布局思路>2.7.1 布局思路<a hidden class=anchor aria-hidden=true href=#271-布局思路>#</a></h4><p>在布局的时候，可以首先确定一些较大的元器件的位置，然后将相同特征的元器件按照上一步确定的位置进行轴对称布局。在这一过程中，除了差分对管需要考虑将其放在一起并且对称外，其余的晶体管可以先不考虑其在电路图中的相对位置，首先将对称的布局做出来。</p><p>其次，在元器件布局完成后，可以在周围放置一圈 vdd 和 gnd，而不是仅在上方放置 vdd，在下方放置 gnd，相较于后一种方式，放置一圈电源线对于后期的布局更为有利。</p><p>在布局过程中，可能会出现某个地方放置一个元器件显得空闲区域太多，此时我们可以将其分成两个元器件，并将其并联起来以达到扩大区域的目的。</p><p>最后，对于版图中存在的较大的空闲区域，我们可以添加滤波电容，合理的调节滤波电容的大小，使得它能够填满整个空闲区域，从而完成版图填充度的要求。</p><p>按照上述的步骤进行布局，一般来说可以在保证版图对称性的前提下进一步提高版图的紧凑性，以解决版图中空隙较大的问题。</p><h4 id=272-布线思路>2.7.2 布线思路<a hidden class=anchor aria-hidden=true href=#272-布线思路>#</a></h4><p>布局完成后就需要进行布线了，在布线的过程中，发现了一种较为方便且快速的布线方法，叙述如下。</p><p>首先，在版图布局的时候将各个元器件进行命名，使得其具有和电路图一样的标识（例如 M1、R1、C1、Q1 等），以方便后续的操作。</p><p>其次，在布线的时候，参照电路图，从上到下，从左到右，对每一个晶体管进行布线，连线的时候综合考虑元器件之间的位置，途径的元器件，采用合适的金属将其连接起来。当从某个元器件出发的所有导线都布局完成后，在电路图上用笔做一个标记。</p><p>重复上一过程，即可在较短的时间内，较为合理的将所有的导线布局完成。</p><h4 id=273-布线错误>2.7.3 布线错误<a hidden class=anchor aria-hidden=true href=#273-布线错误>#</a></h4><p>最后需要讲到的一个问题是 LVS 时经常遇到的一个错误，它的错误信息通常非常简单，和上一部分给出的图例类似，故在此不再展示。它所描述的错误依旧是连接问题，但是简单的从电路图上无法看出任何的问题。</p><p>此时就需要介绍到一个用于查看单层材料布局的方法，首先打开 LSW 窗口，如图 45 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/45.png alt="图 45：LSW 窗口"><figcaption><p>图 45：LSW 窗口</p></figcaption></figure><p>可以发现，上面有各种布局所用到的材料，我们选择 M1，然后单击上方的 NV 按钮，即可仅查看 M1 连接，可以看到如图 46 所示的结果：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/46.png alt="图 46：单层材料布局查看"><figcaption><p>图 46：单层材料布局查看</p></figcaption></figure><p>然后我们回到 LSW 窗口，再点击 M2，即可在查看 M1 的基础上再查看 M2 金属的布局。这样一层一层的往上查看时，会发现出错的布线在同一层与其它同种类型的金属线交叉从而造成了短路，形成了 LVS 错误。这种错误通常非常隐蔽，因此需要通过上面介绍到的单层材料布局查看法来进行检查。</p><p>至此，整个版图的设计以及检查就完成了，最终成功通过了 LVS 验证，结果如图 47 所示：</p><figure><img loading=lazy src=/images/2022/%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89/47.png alt="图 47：LVS 最终结果"><figcaption><p>图 47：LVS 最终结果</p></figcaption></figure><h2 id=三疑问>三、疑问<a hidden class=anchor aria-hidden=true href=#三疑问>#</a></h2><p>通过这两个版图的实验，学习到了狠多版图方面的知识，同时也产生了一些疑惑，以及一些相关的思考，现列举如下。</p><p>在布局的时候发现电容是一个较大的器件，而且电容仅包含 M5 和 M6，在版图设计的过程中，以及尝试过在电容下面走线的布线方式，现在考虑能否将晶体管也放置在电容下方，因为电容与晶体管不在同一层上，故而可以更大程度上的利用面积，从而减小系统的体积，增大集成度。</p><p>此外，考虑到 Pad 的面积也较为庞大，因此，能否将一些其它的器件布置于 Pad 下方，例如电阻等。</p><p>最后，Cadence 版图设计系统是否可以开发出一种三维视图的功能，这样在布局不限的时候能够非常清楚各个层中的材料位置，更大的方便了布线的过程，减少了短路的可能。</p><p>（<em>整理至此，方觉当年之愚钝，姑且当做是一种留念吧；各位看官也请有针对性的参考其中的内容。</em>）</p></div><footer class=post-footer><div class=copyright-box style="margin:0 auto;margin-bottom:5px;text-align:center;border:1px dashed #ccc;padding:5px"><p>本作品采用<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel="noopener noreferrer" style="box-shadow:0 1px">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。</p><div style=margin-top:5px><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel="noopener noreferrer"><img src=https://blog.wangjunfeng.com/statics/images/cc/CC_BY-NC-SA.svg alt=CC-BY-NC-SA style=width:auto;height:42px;display:inline-block></a>
<a href=https://notbyai.fyi target=_blank rel="noopener noreferrer"><img src=https://blog.wangjunfeng.com/statics/images/not-by-ai/Written-By-Human-Not-By-AI-Badge-white.svg alt=真人撰写，非AI生成 style=width:auto;height:42px;display:inline-block></a></div></div><ul class=post-tags><li><a href=https://kwang.life/tags/%E9%9B%86%E6%88%90%E7%94%B5%E8%B7%AF%E7%89%88%E5%9B%BE/>集成电路版图</a></li><li><a href=https://kwang.life/tags/%E8%BF%90%E7%AE%97%E6%94%BE%E5%A4%A7%E5%99%A8/>运算放大器</a></li><li><a href=https://kwang.life/tags/%E5%B8%A6%E9%9A%99%E5%9F%BA%E5%87%86%E6%BA%90/>带隙基准源</a></li></ul><nav class=paginav><a class=prev href=https://kwang.life/2023/08/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84%E8%B7%9D%E7%A6%BB%E5%BA%A6%E9%87%8F%E6%B1%87%E6%80%BB/><span class=title>« Prev</span><br><span>机器学习中常用的距离度量汇总</span></a>
<a class=next href=https://kwang.life/2022/08/linux-%E9%85%8D%E7%BD%AE-github-%E8%B4%A6%E5%8F%B7/><span class=title>Next »</span><br><span>Linux 配置 GitHub 账号</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 集成电路版图设计实验（以运算放大器和带隙基准源为例） on twitter" href="https://twitter.com/intent/tweet/?text=%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89&url=https%3a%2f%2fkwang.life%2f2022%2f12%2f%25E9%259B%2586%25E6%2588%2590%25E7%2594%25B5%25E8%25B7%25AF%25E7%2589%2588%25E5%259B%25BE%25E8%25AE%25BE%25E8%25AE%25A1%25E5%25AE%259E%25E9%25AA%258C%25E4%25BB%25A5%25E8%25BF%2590%25E7%25AE%2597%25E6%2594%25BE%25E5%25A4%25A7%25E5%2599%25A8%25E5%2592%258C%25E5%25B8%25A6%25E9%259A%2599%25E5%259F%25BA%25E5%2587%2586%25E6%25BA%2590%25E4%25B8%25BA%25E4%25BE%258B%2f&hashtags=%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%2c%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%2c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 集成电路版图设计实验（以运算放大器和带隙基准源为例） on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fkwang.life%2f2022%2f12%2f%25E9%259B%2586%25E6%2588%2590%25E7%2594%25B5%25E8%25B7%25AF%25E7%2589%2588%25E5%259B%25BE%25E8%25AE%25BE%25E8%25AE%25A1%25E5%25AE%259E%25E9%25AA%258C%25E4%25BB%25A5%25E8%25BF%2590%25E7%25AE%2597%25E6%2594%25BE%25E5%25A4%25A7%25E5%2599%25A8%25E5%2592%258C%25E5%25B8%25A6%25E9%259A%2599%25E5%259F%25BA%25E5%2587%2586%25E6%25BA%2590%25E4%25B8%25BA%25E4%25BE%258B%2f&title=%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89&summary=%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89&source=https%3a%2f%2fkwang.life%2f2022%2f12%2f%25E9%259B%2586%25E6%2588%2590%25E7%2594%25B5%25E8%25B7%25AF%25E7%2589%2588%25E5%259B%25BE%25E8%25AE%25BE%25E8%25AE%25A1%25E5%25AE%259E%25E9%25AA%258C%25E4%25BB%25A5%25E8%25BF%2590%25E7%25AE%2597%25E6%2594%25BE%25E5%25A4%25A7%25E5%2599%25A8%25E5%2592%258C%25E5%25B8%25A6%25E9%259A%2599%25E5%259F%25BA%25E5%2587%2586%25E6%25BA%2590%25E4%25B8%25BA%25E4%25BE%258B%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 集成电路版图设计实验（以运算放大器和带隙基准源为例） on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fkwang.life%2f2022%2f12%2f%25E9%259B%2586%25E6%2588%2590%25E7%2594%25B5%25E8%25B7%25AF%25E7%2589%2588%25E5%259B%25BE%25E8%25AE%25BE%25E8%25AE%25A1%25E5%25AE%259E%25E9%25AA%258C%25E4%25BB%25A5%25E8%25BF%2590%25E7%25AE%2597%25E6%2594%25BE%25E5%25A4%25A7%25E5%2599%25A8%25E5%2592%258C%25E5%25B8%25A6%25E9%259A%2599%25E5%259F%25BA%25E5%2587%2586%25E6%25BA%2590%25E4%25B8%25BA%25E4%25BE%258B%2f&title=%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 集成电路版图设计实验（以运算放大器和带隙基准源为例） on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fkwang.life%2f2022%2f12%2f%25E9%259B%2586%25E6%2588%2590%25E7%2594%25B5%25E8%25B7%25AF%25E7%2589%2588%25E5%259B%25BE%25E8%25AE%25BE%25E8%25AE%25A1%25E5%25AE%259E%25E9%25AA%258C%25E4%25BB%25A5%25E8%25BF%2590%25E7%25AE%2597%25E6%2594%25BE%25E5%25A4%25A7%25E5%2599%25A8%25E5%2592%258C%25E5%25B8%25A6%25E9%259A%2599%25E5%259F%25BA%25E5%2587%2586%25E6%25BA%2590%25E4%25B8%25BA%25E4%25BE%258B%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 集成电路版图设计实验（以运算放大器和带隙基准源为例） on whatsapp" href="https://api.whatsapp.com/send?text=%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89%20-%20https%3a%2f%2fkwang.life%2f2022%2f12%2f%25E9%259B%2586%25E6%2588%2590%25E7%2594%25B5%25E8%25B7%25AF%25E7%2589%2588%25E5%259B%25BE%25E8%25AE%25BE%25E8%25AE%25A1%25E5%25AE%259E%25E9%25AA%258C%25E4%25BB%25A5%25E8%25BF%2590%25E7%25AE%2597%25E6%2594%25BE%25E5%25A4%25A7%25E5%2599%25A8%25E5%2592%258C%25E5%25B8%25A6%25E9%259A%2599%25E5%259F%25BA%25E5%2587%2586%25E6%25BA%2590%25E4%25B8%25BA%25E4%25BE%258B%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 集成电路版图设计实验（以运算放大器和带隙基准源为例） on telegram" href="https://telegram.me/share/url?text=%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89&url=https%3a%2f%2fkwang.life%2f2022%2f12%2f%25E9%259B%2586%25E6%2588%2590%25E7%2594%25B5%25E8%25B7%25AF%25E7%2589%2588%25E5%259B%25BE%25E8%25AE%25BE%25E8%25AE%25A1%25E5%25AE%259E%25E9%25AA%258C%25E4%25BB%25A5%25E8%25BF%2590%25E7%25AE%2597%25E6%2594%25BE%25E5%25A4%25A7%25E5%2599%25A8%25E5%2592%258C%25E5%25B8%25A6%25E9%259A%2599%25E5%259F%25BA%25E5%2587%2586%25E6%25BA%2590%25E4%25B8%25BA%25E4%25BE%258B%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 集成电路版图设计实验（以运算放大器和带隙基准源为例） on ycombinator" href="https://news.ycombinator.com/submitlink?t=%e9%9b%86%e6%88%90%e7%94%b5%e8%b7%af%e7%89%88%e5%9b%be%e8%ae%be%e8%ae%a1%e5%ae%9e%e9%aa%8c%ef%bc%88%e4%bb%a5%e8%bf%90%e7%ae%97%e6%94%be%e5%a4%a7%e5%99%a8%e5%92%8c%e5%b8%a6%e9%9a%99%e5%9f%ba%e5%87%86%e6%ba%90%e4%b8%ba%e4%be%8b%ef%bc%89&u=https%3a%2f%2fkwang.life%2f2022%2f12%2f%25E9%259B%2586%25E6%2588%2590%25E7%2594%25B5%25E8%25B7%25AF%25E7%2589%2588%25E5%259B%25BE%25E8%25AE%25BE%25E8%25AE%25A1%25E5%25AE%259E%25E9%25AA%258C%25E4%25BB%25A5%25E8%25BF%2590%25E7%25AE%2597%25E6%2594%25BE%25E5%25A4%25A7%25E5%2599%25A8%25E5%2592%258C%25E5%25B8%25A6%25E9%259A%2599%25E5%259F%25BA%25E5%2587%2586%25E6%25BA%2590%25E4%25B8%25BA%25E4%25BE%258B%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></div></footer><div id=tcomment></div><script src=https://cdn.staticfile.org/twikoo/1.6.17/twikoo.all.min.js></script>
<script>twikoo.init({envId:'twikoo-5gwvo0qda499b637',el:'#tcomment'})</script></article></main><footer class=footer><span>&copy; 2023 <a href=https://kwang.life>退思轩</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><a href="https://ipw.cn/ssl/?site=kwang.life" title=本站支持SSL安全访问 target=_blank><img style=display:inline-block;vertical-align:middle alt=本站支持SSL安全访问 src=https://static.ipw.cn/icon/ssl-s1.svg></a>
<a href="https://ipw.cn/ipv6webcheck/?site=kwang.life" title=本站支持IPv6访问 target=_blank><img style=display:inline-block;vertical-align:middle alt=本站支持IPv6访问 src=https://static.ipw.cn/icon/ipv6-certified-s1.svg></a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>